<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>üöÄ HERCULES MATUSALEM - Command Center</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Launcher">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
                html, body{
  zoom: 0.8;         /* 80% */
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            overflow-x: hidden;
            width: 100%;
        }

        /* ‚úÖ FIX 1 - Animation moved to top */
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        :root {
            --primary: #10b981;
            --secondary: #059669;
            --accent: #ffaa00;
            --bg-dark: #1a2332;
            --bg-card: #2d3e56;
            --text: #ffffff;
            --text-dim: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        /* ENHANCED CLOCK DISPLAY STYLES - FULL WIDTH */
        .enhanced-clock-container {
            background: rgba(255, 255, 255, 0.18);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 8px 25px;
            margin: 0;
            border: 2px solid rgba(255, 255, 255, 0.35);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.35);
            width: 100%;
            max-width: 100%;
            height: 150px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .time-date-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .main-time-display {
            font-size: 2.4em;
            font-weight: 900;
            text-align: center;
            color: #00ffff;
            text-shadow: 0 0 25px rgba(0, 255, 255, 0.9), 
                         0 0 50px rgba(0, 255, 255, 0.6),
                         0 3px 10px rgba(0, 0, 0, 0.8),
                         0 0 5px rgba(0, 0, 0, 1);
            margin-bottom: 0;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.12em;
            line-height: 1;
        }

        .full-date-display {
            text-align: center;
            font-size: 0.9em;
            color: #ffffff;
            margin-bottom: 0;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9),
                         0 0 5px rgba(0, 0, 0, 1);
            line-height: 1.2;
        }

        .date-details-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin-top: 3px;
            justify-items: stretch;
        }

        .date-detail-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 6px 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            width: 100%;
            font-size: 0.9em;
        }

        .date-detail-item:hover {
            background: rgba(255, 255, 255, 0.22);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .date-detail-label {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 2px;
            flex: 1;
        }
        
        .detail-emoji {
            font-size: 2.5em;
            line-height: 1;
            filter: drop-shadow(0 0 8px rgba(0, 0, 0, 1)) 
                    drop-shadow(0 0 15px rgba(255, 255, 255, 0.5))
                    drop-shadow(0 3px 8px rgba(0, 0, 0, 1));
            flex-shrink: 0;
        }
        
        .detail-text {
            font-size: 0.65em;
            line-height: 1.2;
            text-align: left;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            font-weight: 700;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
        }

        .date-detail-value {
            font-size: 1.4em;
            color: #00ffff;
            font-weight: 900;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.8),
                         0 2px 5px rgba(0, 0, 0, 0.8),
                         0 0 5px rgba(0, 0, 0, 1);
            text-align: left;
        }

        /* WEATHER BADGE - EXTREME COMPACT FOR 5% COLUMN */
        .badge-weather .weather-stack {
            display: flex;
            flex-direction: column;
            line-height: 1;
            align-items: center;
            gap: 1px;
            width: 100%;
        }

        .badge-weather .weather-main {
            font-size: 0.9em;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.9),
                         0 0 10px rgba(0, 0, 0, 0.7),
                         0 0 3px rgba(0, 0, 0, 1);
            text-align: center;
        }

        .badge-weather .weather-loc-mini {
            font-size: 0.65em;
            font-weight: 700;
            opacity: 0.98;
            max-width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #ffffff;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9),
                         0 0 3px rgba(0, 0, 0, 1);
            text-align: center;
        }

        @media (max-width: 768px) {
            .badge-weather .weather-main { font-size: 0.85em; }
            .badge-weather .weather-loc-mini { font-size: 0.6em; }
        }

        /* ‚úÖ FIX 2 - ONE COLUMN HEADER LAYOUT */
        .header-two-columns {
            display: grid;
            grid-template-columns: 1fr;
            align-items: center;
            gap: 5px;
            position: relative;
            z-index: 1;
            margin-top: 10px;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding: 0 2px;
        }

        .header-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .header-two-columns {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 0 10px;
            }
            
            .header-center {
                order: -1;
            }
            
            .enhanced-clock-container {
                max-width: 100%;
            }
            
            .time-date-inline {
                flex-direction: column;
                gap: 5px;
            }
            
            .main-time-display {
                font-size: 2em;
            }
            
            .full-date-display {
                font-size: 0.9em;
            }
        }
        
        /* Extra small screens (phones in portrait) */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em !important;
            }
            
            .main-time-display {
                font-size: 1.5em !important;
                letter-spacing: 0.08em;
            }
            
            .full-date-display {
                font-size: 0.75em !important;
            }
            
            .date-details-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 4px;
            }
            
            .date-detail-item {
                font-size: 0.75em;
                padding: 4px 8px;
            }
            
            .detail-emoji {
                font-size: 2em;
            }
            
            .enhanced-clock-container {
                padding: 6px 15px;
                height: auto;
                min-height: 120px;
            }
            
            .header {
                padding: 20px 10px;
                min-height: auto;
            }
            
            .subtitle .badge {
                font-size: 0.8em;
                padding: 6px 12px;
            }
            
            /* Search box responsive */
            .search-box {
                gap: 6px;
            }
            
            .search-box input {
                font-size: 1.5em;
                padding: 16px 20px;
                padding-right: 62px;
                font-weight: 700;
            }
            
            .search-box button {
                padding: 16px 22px;
                font-size: 1em;
                font-weight: 700;
            }
            
            .input-clear-btn,
            .filter-clear-btn {
                width: 45px;
                font-size: 1.3em;
                background: linear-gradient(135deg, #ff0000, #cc0000) !important;
                box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4) !important;
                height: calc(100% - 6px) !important;
                border-radius: 8px !important;
            }
            
            .input-clear-btn {
                right: 75px !important;
            }
            
            .filter-clear-btn {
                right: 8px !important;
            }
            
            .search-history {
                padding: 15px;
            }
            
            .search-history-title {
                font-size: 1em;
            }
            
            .search-history-item {
                font-size: 0.9em;
                padding: 8px 12px;
            }
            
            .container {
                padding: 5px !important;
            }
            
            /* Link cards responsive */
            .links-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 12px;
            }
            
            .link-card {
                padding: 15px;
            }
            
            .link-card img {
                width: 48px;
                height: 48px;
            }
            
            .link-card .link-name {
                font-size: 0.8em;
            }
            
            .favorite-star {
                font-size: 1.2em;
                top: 5px;
                right: 5px;
            }
        }
        
        /* Ultra small screens - Buton doar cu icon */
        @media (max-width: 380px) {
            /* Ascunde textul butonului pe ecrane foarte mici */
            .search-box button {
                font-size: 0 !important;
                padding: 14px 18px !important;
                min-width: 50px;
            }
            
            .search-box button::after {
                content: 'üîç';
                font-size: 1.3em;
                display: inline-block;
            }
            
            .header h1 {
                font-size: 1.6em !important;
            }
            
            .search-box input {
                padding: 12px 16px !important;
                padding-right: 58px !important;
                font-size: 1.4em !important;
                font-weight: 700 !important;
            }
        }
        
        /* Medium screens (tablets) */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .main-time-display {
                font-size: 1.8em;
            }
            
            .enhanced-clock-container {
                padding: 8px 20px;
            }
            
            .search-box input {
                font-size: 1.6em;
                padding: 16px 20px;
                font-weight: 700;
            }
            
            .search-box button {
                padding: 18px 35px;
                font-size: 1.1em;
                font-weight: 700;
            }
            
            .links-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 15px;
            }
        }

        /* THEME 1: Purple Dream üíú */
        body[data-theme="purple"] {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }
        body[data-theme="purple"] .header {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.4) 0%, rgba(118, 75, 162, 0.4) 100%);
            border-color: rgba(255, 255, 255, 0.5);
        }
        body[data-theme="purple"] .weather-modal-content {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(139, 92, 246, 0.95) 100%);
        }
        body[data-theme="purple"] .clock-modal-content {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.95) 0%, rgba(168, 85, 247, 0.95) 100%);
        }
        body[data-theme="purple"] .server-modal-content {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(6, 182, 212, 0.95) 100%);
        }
        body[data-theme="purple"] .modal-content {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(219, 39, 119, 0.95) 100%);
        }

        /* THEME 2: Neon Night üíö - ‚úÖ FIX 3 - CLEANED UP */
        body[data-theme="neon"] {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
        }
        body[data-theme="neon"] .header {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.5) 0%, rgba(6, 182, 212, 0.5) 100%);
            border-color: rgba(16, 185, 129, 0.8);
        }
        body[data-theme="neon"] .particle {
            background: rgba(16, 185, 129, 1);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.8);
        }
        body[data-theme="neon"] .subtitle .badge {
            background: rgba(16, 185, 129, 0.3);
            border-color: rgba(16, 185, 129, 0.8);
        }
        body[data-theme="neon"] .subtitle .badge:hover {
            background: rgba(16, 185, 129, 0.5);
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.6);
        }
        body[data-theme="neon"] .search-box input {
            border-color: rgba(16, 185, 129, 0.6);
            background: rgba(16, 185, 129, 0.15);
        }
        body[data-theme="neon"] .search-box input:focus {
            border-color: #10b981;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.5);
        }
        body[data-theme="neon"] .search-history {
            background: rgba(16, 185, 129, 0.15);
            border-color: rgba(16, 185, 129, 0.5);
        }
        body[data-theme="neon"] .link-card {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.5);
        }
        body[data-theme="neon"] .link-card:hover {
            border-color: #10b981;
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.5);
            background: rgba(16, 185, 129, 0.35);
        }
        body[data-theme="neon"] .weather-modal-content {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(6, 182, 212, 0.95) 100%);
        }
        body[data-theme="neon"] .clock-modal-content {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.95) 0%, rgba(14, 165, 233, 0.95) 100%);
        }
        body[data-theme="neon"] .server-modal-content {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.95) 0%, rgba(16, 185, 129, 0.95) 100%);
        }
        body[data-theme="neon"] .modal-content {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.95) 0%, rgba(16, 185, 129, 0.95) 100%);
        }

        /* THEME 3: Sunset Vibes üåÖ - ‚úÖ FIX 3 - CLEANED UP */
        body[data-theme="sunset"] {
            background: linear-gradient(135deg, #ff512f 0%, #f09819 50%, #ff512f 100%);
        }
        body[data-theme="sunset"] .header {
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.4) 0%, rgba(239, 68, 68, 0.4) 100%);
            border-color: rgba(255, 255, 255, 0.6);
        }
        body[data-theme="sunset"] .particle {
            background: rgba(251, 191, 36, 1);
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.8);
        }
        body[data-theme="sunset"] .subtitle .badge {
            background: rgba(251, 146, 60, 0.3);
            border-color: rgba(251, 191, 36, 0.8);
        }
        body[data-theme="sunset"] .subtitle .badge:hover {
            background: rgba(251, 146, 60, 0.5);
            box-shadow: 0 5px 20px rgba(251, 146, 60, 0.6);
        }
        body[data-theme="sunset"] .search-box input {
            border-color: rgba(251, 146, 60, 0.6);
            background: rgba(251, 146, 60, 0.15);
        }
        body[data-theme="sunset"] .search-box input:focus {
            border-color: #fb923c;
            box-shadow: 0 0 30px rgba(251, 146, 60, 0.5);
        }
        body[data-theme="sunset"] .search-history {
            background: rgba(251, 146, 60, 0.15);
            border-color: rgba(251, 146, 60, 0.5);
        }
        body[data-theme="sunset"] .link-card {
            background: rgba(251, 146, 60, 0.25);
            border-color: rgba(251, 146, 60, 0.5);
        }
        body[data-theme="sunset"] .link-card:hover {
            border-color: #fb923c;
            box-shadow: 0 15px 40px rgba(251, 146, 60, 0.5);
            background: rgba(251, 146, 60, 0.4);
        }
        body[data-theme="sunset"] .weather-modal-content {
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.95) 0%, rgba(239, 68, 68, 0.95) 100%);
        }
        body[data-theme="sunset"] .clock-modal-content {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.95) 0%, rgba(251, 146, 60, 0.95) 100%);
        }
        body[data-theme="sunset"] .server-modal-content {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.95) 0%, rgba(220, 38, 38, 0.95) 100%);
        }
        body[data-theme="sunset"] .modal-content {
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.95) 0%, rgba(239, 68, 68, 0.95) 100%);
        }

        /* THEME 4: Ocean Breeze üåä - ‚úÖ FIX 3 - CLEANED UP */
        body[data-theme="ocean"] {
            background: linear-gradient(135deg, #0093E9 0%, #80D0C7 50%, #13547a 100%);
        }
        body[data-theme="ocean"] .header {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.4) 0%, rgba(14, 165, 233, 0.4) 100%);
            border-color: rgba(255, 255, 255, 0.6);
        }
        body[data-theme="ocean"] .particle {
            background: rgba(6, 182, 212, 1);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.8);
        }
        body[data-theme="ocean"] .subtitle .badge {
            background: rgba(6, 182, 212, 0.3);
            border-color: rgba(6, 182, 212, 0.8);
        }
        body[data-theme="ocean"] .subtitle .badge:hover {
            background: rgba(6, 182, 212, 0.5);
            box-shadow: 0 5px 20px rgba(6, 182, 212, 0.6);
        }
        body[data-theme="ocean"] .search-box input {
            border-color: rgba(6, 182, 212, 0.6);
            background: rgba(6, 182, 212, 0.15);
        }
        body[data-theme="ocean"] .search-box input:focus {
            border-color: #06b6d4;
            box-shadow: 0 0 30px rgba(6, 182, 212, 0.5);
        }
        body[data-theme="ocean"] .search-history {
            background: rgba(6, 182, 212, 0.15);
            border-color: rgba(6, 182, 212, 0.5);
        }
        body[data-theme="ocean"] .link-card {
            background: rgba(6, 182, 212, 0.25);
            border-color: rgba(6, 182, 212, 0.5);
        }
        body[data-theme="ocean"] .link-card:hover {
            border-color: #06b6d4;
            box-shadow: 0 15px 40px rgba(6, 182, 212, 0.5);
            background: rgba(6, 182, 212, 0.4);
        }
        body[data-theme="ocean"] .weather-modal-content {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.95) 0%, rgba(14, 165, 233, 0.95) 100%);
        }
        body[data-theme="ocean"] .clock-modal-content {
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.95) 0%, rgba(59, 130, 246, 0.95) 100%);
        }
        body[data-theme="ocean"] .server-modal-content {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.95) 0%, rgba(16, 185, 129, 0.95) 100%);
        }
        body[data-theme="ocean"] .modal-content {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.95) 0%, rgba(14, 165, 233, 0.95) 100%);
        }

        /* THEME 5: Light Mode ‚òÄÔ∏è - ‚úÖ FIX 3 - CLEANED UP */
        body[data-theme="light"] {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 50%, #e0f2fe 100%);
        }
        body[data-theme="light"] .header {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%);
            border-color: rgba(59, 130, 246, 0.4);
        }
        body[data-theme="light"] .header h1 {
            background: linear-gradient(135deg, #3b82f6, #9333ea, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        body[data-theme="light"] .subtitle {
            color: #1e293b;
        }
        body[data-theme="light"] .particle {
            background: rgba(59, 130, 246, 0.6);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
        }
        body[data-theme="light"] .subtitle .badge {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(59, 130, 246, 0.5);
            color: #1e293b;
        }
        body[data-theme="light"] .subtitle .badge:hover {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.3);
            border-color: rgba(59, 130, 246, 0.8);
        }
        body[data-theme="light"] .search-box input {
            border-color: rgba(59, 130, 246, 0.4);
            background: rgba(255, 255, 255, 0.9);
            color: #1e293b;
        }
        body[data-theme="light"] .search-box input::placeholder {
            color: rgba(30, 41, 59, 0.8);
            font-weight: 700;
        }
        body[data-theme="light"] .search-box input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 1);
        }
        body[data-theme="light"] .search-box button {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }
        body[data-theme="light"] .search-history {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(59, 130, 246, 0.3);
        }
        body[data-theme="light"] .search-history-title {
            color: #3b82f6;
        }
        body[data-theme="light"] .search-history-item {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            color: #1e293b;
        }
        body[data-theme="light"] .search-history-item:hover {
            background: rgba(59, 130, 246, 0.2);
        }
        body[data-theme="light"] .search-count {
            background: #3b82f6;
            color: white;
        }
        body[data-theme="light"] .sort-toggle,
        body[data-theme="light"] .clear-history {
            color: #1e293b;
            background: rgba(255, 255, 255, 0.9);
        }
        body[data-theme="light"] .sort-toggle:hover,
        body[data-theme="light"] .clear-history:hover {
            background: rgba(255, 255, 255, 1);
        }
        body[data-theme="light"] .link-card {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(59, 130, 246, 0.3);
            color: #1e293b;
        }
        body[data-theme="light"] .link-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 1);
        }
        body[data-theme="light"] .link-name {
            color: #1e293b;
        }
        body[data-theme="light"] .weather-modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(240, 249, 255, 0.98) 100%);
            border-color: rgba(59, 130, 246, 0.5);
        }
        body[data-theme="light"] .weather-modal-content h2 {
            color: #3b82f6;
        }
        body[data-theme="light"] .weather-main-temp {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(147, 51, 234, 0.15));
            border-color: rgba(59, 130, 246, 0.4);
        }
        body[data-theme="light"] .weather-main-temp h2 {
            color: #3b82f6;
            text-shadow: none;
        }
        body[data-theme="light"] .weather-main-temp p {
            color: #475569;
        }
        body[data-theme="light"] .weather-detail-item {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(59, 130, 246, 0.3);
        }
        body[data-theme="light"] .weather-detail-icon {
            color: #3b82f6;
        }
        body[data-theme="light"] .weather-detail-label {
            color: #64748b;
        }
        body[data-theme="light"] .weather-detail-value {
            color: #1e293b;
        }
        body[data-theme="light"] .clock-modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(251, 245, 255, 0.98) 100%);
            border-color: rgba(147, 51, 234, 0.5);
        }
        body[data-theme="light"] .clock-modal-content h2 {
            color: #9333ea;
        }
        body[data-theme="light"] .clock-display {
            color: #9333ea;
            text-shadow: none;
        }
        body[data-theme="light"] .clock-info-item {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(147, 51, 234, 0.3);
        }
        body[data-theme="light"] .clock-info-label {
            color: #64748b;
        }
        body[data-theme="light"] .clock-info-value {
            color: #1e293b;
        }
        body[data-theme="light"] .server-modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(240, 253, 244, 0.98) 100%);
            border-color: rgba(16, 185, 129, 0.5);
        }
        body[data-theme="light"] .server-status-display {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(6, 182, 212, 0.15));
            border-color: rgba(16, 185, 129, 0.4);
        }
        body[data-theme="light"] .server-status-text {
            color: #1e293b;
            text-shadow: none;
        }
        body[data-theme="light"] .server-info-item {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(16, 185, 129, 0.3);
        }
        body[data-theme="light"] .server-info-label {
            color: #64748b;
        }
        body[data-theme="light"] .server-info-value {
            color: #1e293b;
        }
        body[data-theme="light"] .modal-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(250, 245, 255, 0.98) 100%);
            border-color: rgba(139, 92, 246, 0.5);
        }
        body[data-theme="light"] .modal-content h2 {
            color: #8b5cf6;
        }
        body[data-theme="light"] .modal-content input,
        body[data-theme="light"] .modal-content select {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(139, 92, 246, 0.4);
            color: #1e293b;
        }
        body[data-theme="light"] .modal-content input::placeholder {
            color: rgba(30, 41, 59, 0.5);
        }
        body[data-theme="light"] .modal-content input:focus,
        body[data-theme="light"] .modal-content select:focus {
            border-color: #8b5cf6;
            background: rgba(255, 255, 255, 1);
        }
        body[data-theme="light"] .modal-content label {
            color: #1e293b;
        }
        body[data-theme="light"] .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        body[data-theme="light"] .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: #1e293b;
            border-color: rgba(59, 130, 246, 0.4);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
            transition: background 0.5s ease;
            touch-action: manipulation;
            -ms-touch-action: manipulation;
        }

        /* Animated background particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: float 20s infinite;
            opacity: 0.6;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-100vh) translateX(50px); }
            50% { transform: translateY(-200vh) translateX(-50px); }
            75% { transform: translateY(-300vh) translateX(30px); }
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 50px 15px 30px 15px;
            position: relative;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
                width: 100%;
                max-width: 100%;
                margin: 0;
            }
        }

        .header {
            text-align: center;
            padding: 35px 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.4) 0%, rgba(118, 75, 162, 0.4) 100%);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: visible;
            backdrop-filter: blur(10px);
            transition: all 0.5s ease;
            min-height: 220px;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
            position: relative;
            z-index: 1;
            font-weight: 900;
        }
        
        .header-emoji {
            -webkit-text-fill-color: initial;
            background: none;
            display: inline-block;
            filter: drop-shadow(0 0 12px rgba(0, 0, 0, 1)) 
                    drop-shadow(0 0 25px rgba(255, 255, 255, 0.9))
                    drop-shadow(0 4px 10px rgba(0, 0, 0, 1))
                    drop-shadow(0 0 5px rgba(255, 255, 255, 1));
            animation: rocket-pulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes rocket-pulse {
            from { 
                filter: drop-shadow(0 0 12px rgba(0, 0, 0, 1)) 
                        drop-shadow(0 0 25px rgba(255, 255, 255, 0.9))
                        drop-shadow(0 4px 10px rgba(0, 0, 0, 1));
            }
            to { 
                filter: drop-shadow(0 0 15px rgba(0, 0, 0, 1)) 
                        drop-shadow(0 0 35px rgba(255, 255, 255, 1))
                        drop-shadow(0 6px 15px rgba(0, 0, 0, 1));
            }
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px var(--primary)); }
            to { filter: drop-shadow(0 0 30px var(--secondary)); }
        }

        .header .subtitle {
            font-size: 0.95em;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
            margin-top: 5px;
        }

        .subtitle .badge {
            background: rgba(255, 255, 255, 0.25);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.5s ease;
            cursor: pointer;
            font-size: 0.95em;
            backdrop-filter: blur(10px);
        }

        .subtitle .badge:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.6);
            border-color: rgba(255, 255, 255, 0.9);
        }

        /* Weather Modal */
        .weather-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .weather-modal.show {
            display: flex;
        }

        .weather-modal-content {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.95) 0%, rgba(139, 92, 246, 0.95) 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px);
        }

        .weather-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(239, 68, 68, 0.6);
            border: none;
            color: var(--text);
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .weather-modal-close:hover {
            background: rgba(239, 68, 68, 0.8);
            transform: rotate(90deg);
        }

        .weather-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .weather-detail-item {
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
        }

        .weather-detail-icon {
            font-size: 2em;
            color: #fbbf24;
        }

        .weather-detail-text {
            flex: 1;
        }

        .weather-detail-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 5px;
        }

        .weather-detail-value {
            font-size: 1.2em;
            font-weight: 600;
            color: #fff;
        }

        .weather-main-temp {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2));
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .weather-main-temp h2 {
            font-size: 3em;
            color: #fff;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .weather-main-temp p {
            font-size: 1.2em;
            color: rgba(255, 255, 255, 0.95);
        }

        /* Clock Modal */
        .clock-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .clock-modal.show {
            display: flex;
        }

        .clock-modal-content {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.95) 0%, rgba(168, 85, 247, 0.95) 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            text-align: center;
            backdrop-filter: blur(20px);
        }

        .clock-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(239, 68, 68, 0.6);
            border: none;
            color: var(--text);
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .clock-modal-close:hover {
            background: rgba(239, 68, 68, 0.8);
            transform: rotate(90deg);
        }

        .clock-display {
            font-size: 4em;
            font-weight: 700;
            color: #fff;
            margin: 20px 0;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
        }

        .clock-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
        }

        .clock-info-item {
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }

        .clock-info-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 5px;
        }

        .clock-info-value {
            font-size: 1.2em;
            font-weight: 600;
            color: #fff;
        }

        /* Server Modal */
        .server-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .server-modal.show {
            display: flex;
        }

        .server-modal-content {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(6, 182, 212, 0.95) 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px);
        }

        .server-status-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2));
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .server-status-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .server-status-text {
            font-size: 2em;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .server-info {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .server-info-item {
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .server-info-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .server-info-value {
            font-weight: 600;
            color: #fff;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            display: inline-block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Search Bar - FULL WIDTH */
        .search-container {
            margin: 30px 0;
            width: 100%;
            padding: 0;
        }

        .search-box {
            position: relative;
            display: flex;
            gap: 10px;
            width: 100%;
        }
        
        /* Clear button inside Google search - MAXIMUM RIGHT POSITION */
        .input-clear-btn {
            position: absolute;
            right: 160px;
            top: 50%;
            transform: translateY(-50%);
            height: calc(100% - 8px);
            background: linear-gradient(135deg, #ff0000, #cc0000) !important;
            border: none;
            border-radius: 10px;
            color: white !important;
            width: 50px;
            cursor: pointer;
            font-size: 1.6em;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            font-weight: 900;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4) !important;
        }
        
        .input-clear-btn:hover {
            background: linear-gradient(135deg, #cc0000, #990000) !important;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.6) !important;
        }
        
        .input-clear-btn.show {
            display: flex;
        }
        
        .filter-clear-btn {
            position: absolute;
            right:4px;
            top: 50%;
            transform: translateY(-50%);
            height: calc(100% - 8px);
            background: linear-gradient(135deg, #ff0000, #cc0000) !important;
            border: none;
            border-radius: 10px;
            color: white !important;
            width: 50px;
            cursor: pointer;
            font-size: 1.6em;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            font-weight: 900;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4) !important;
        }
        
        .filter-clear-btn:hover {
            background: linear-gradient(135deg, #cc0000, #990000) !important;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.6) !important;
        }
        
        .filter-clear-btn.show {
            display: flex;
        }
        
        /* FOR»öARE RO»òU - Reguli ultra-specifice */
        button.input-clear-btn,
        button.input-clear-btn.show,
        .search-box button.input-clear-btn,
        button.filter-clear-btn,
        button.filter-clear-btn.show,
        .search-box button.filter-clear-btn {
            background: linear-gradient(135deg, #ff0000, #cc0000) !important;
            color: white !important;
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4) !important;
        }
        
        button.input-clear-btn:hover,
        button.input-clear-btn.show:hover,
        .search-box button.input-clear-btn:hover,
        button.filter-clear-btn:hover,
        button.filter-clear-btn.show:hover,
        .search-box button.filter-clear-btn:hover {
            background: linear-gradient(135deg, #cc0000, #990000) !important;
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.6) !important;
        }


        .search-box input {
            flex: 1;
            padding: 20px 28px;
            padding-right: 70px; /* Space for clear button (50px + 20px gap) */
            font-size: 1.8em;
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.25);
            color: var(--text);
            outline: none;
            transition: all 0.5s ease;
            backdrop-filter: blur(10px);
        }
        
        /* Google search input needs padding for internal clear button only */
        #googleSearchInput {
            padding-right: 150px; /* Space for clear button (50px @ 90px) + search button (60px) */
        }
        
        /* Filter input with clear button at far right */
        #filterInput {
            padding-right: 70px; /* Space for clear button */
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.95);
            font-weight: 700;
            font-size: 1em;
        }

        .search-box input:focus {
            border-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.35);
        }

        .search-box button {
            padding: 20px 45px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50px;
            color: var(--text);
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .search-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
        }

        /* Search History - FULL WIDTH */
        .search-history {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .search-history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-history-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-toggle {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid var(--primary);
            color: var(--text);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .sort-toggle:hover {
            background: rgba(0, 212, 255, 0.4);
            transform: translateY(-2px);
        }

        .clear-history {
            background: rgba(255, 51, 102, 0.2);
            border: 1px solid var(--danger);
            color: var(--text);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .clear-history:hover {
            background: rgba(255, 51, 102, 0.4);
            transform: translateY(-2px);
        }

        .search-history-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-history-item {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-history-item:hover {
            background: rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        .search-count {
            background: var(--primary);
            color: var(--bg-dark);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.85em;
            font-weight: 600;
        }

        /* Links Grid */
        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .link-card {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--text);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        .link-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }

        .link-card:hover::before {
            left: 100%;
        }

        .link-card:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 15px 40px rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.45);
        }

        .link-card.hidden {
            display: none;
        }

        .link-card img {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .link-card:hover img {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 0 10px var(--primary));
        }

        .link-card .link-name {
            font-size: 0.9em;
            font-weight: 600;
            word-break: break-word;
        }

        /* Favorite Star */
        .favorite-star {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 1.5em;
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            animation: starPulse 2s infinite;
            pointer-events: none;
        }

        @keyframes starPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Preview on Hover */
        .link-card-preview {
            position: absolute;
            bottom: 105%;
            left: 50%;
            transform: translateX(-50%) scale(0.95);
            background: linear-gradient(135deg, rgba(20, 27, 58, 0.98) 0%, rgba(10, 14, 39, 0.98) 100%);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 15px;
            min-width: 250px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            pointer-events: none;
            backdrop-filter: blur(20px);
        }

        /* Desktop: Hover */
        @media (hover: hover) and (pointer: fine) {
            .link-card:hover .link-card-preview {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) scale(1);
            }
        }

        /* Mobile: Tap to toggle */
        @media (hover: none) or (pointer: coarse) {
            .link-card.show-preview .link-card-preview {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) scale(1);
            }
            
            .link-card-preview {
                pointer-events: auto;
            }
            
            .link-info-btn {
                display: none !important;
            }

            .link-edit-btn {
                position: absolute;
                top: 8px;
                left: 8px;
                width: 28px;
                height: 28px;
                background: rgba(251, 146, 60, 0.9);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.75em;
                color: white;
                z-index: 10;
                cursor: pointer;
                opacity: 1;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
                pointer-events: auto;
                user-select: none;
                -webkit-user-select: none;
                -webkit-tap-highlight-color: rgba(251, 146, 60, 0.3);
                touch-action: manipulation;
            }

            .link-edit-btn:active {
                transform: scale(0.9);
                background: rgba(251, 146, 60, 1);
            }
        }

        /* Hide info and edit buttons on desktop */
        @media (hover: hover) and (pointer: fine) {
            .link-info-btn {
                display: none;
            }

            .link-edit-btn {
                position: absolute;
                top: 8px;
                left: 8px;
                width: 28px;
                height: 28px;
                background: rgba(251, 146, 60, 0.9);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.8em;
                color: white;
                z-index: 10;
                cursor: pointer;
                opacity: 0;
                transition: opacity 0.3s ease, transform 0.2s ease;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            }

            .link-card:hover .link-edit-btn {
                opacity: 1;
            }

            .link-edit-btn:hover {
                transform: scale(1.1);
                background: rgba(251, 146, 60, 1);
            }
        }

        .preview-url {
            font-size: 0.75em;
            color: var(--text-dim);
            word-break: break-all;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 8px;
        }

        .preview-stats {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
        }

        .preview-stat {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .preview-stat-label {
            color: var(--text-dim);
            font-size: 0.8em;
        }

        .preview-stat-value {
            color: var(--primary);
            font-weight: 600;
        }

        /* Offline Indicator */
        .offline-indicator {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(239, 68, 68, 0.95);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: 600;
            z-index: 10000;
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.5);
            display: none;
            backdrop-filter: blur(10px);
        }

        .offline-indicator.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Drag & Drop Cursor */
        .link-card[draggable="true"] {
            cursor: grab;
        }

        .link-card[draggable="true"]:active {
            cursor: grabbing;
        }

        /* Add Site Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(219, 39, 119, 0.95) 100%);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.6);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px);
        }

        /* Custom Scrollbar for Modal */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #fff;
        }

        .modal-content input,
        .modal-content select {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 3px solid #000000;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #000000;
            font-size: 0.95em;
            outline: none;
            backdrop-filter: blur(10px);
        }

        .modal-content input:focus,
        .modal-content select:focus,
        .modal-content textarea:focus {
            border-color: #8B5CF6;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
        }

        .modal-content input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
        }

        /* ‚úÖ FIX 4 - RED CLOSE BUTTONS */
        .btn-secondary {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            border: 2px solid #ef4444 !important;
            color: white !important;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c) !important;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.6) !important;
        }

        .btn-primary:hover,
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .add-site-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #fbbf24, #f97316);
            border: none;
            border-radius: 50%;
            font-size: 2em;
            color: var(--text);
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(251, 191, 36, 0.6);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .add-site-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.8);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 10px;
                width: 100%;
                max-width: 100%;
                margin: 0;
            }
            
            .header {
                width: 100%;
                max-width: 100%;
                margin: 0 0 20px 0;
                padding: 20px 10px;
                border-radius: 10px;
            }
            
            .enhanced-clock-container {
                width: 100%;
                max-width: 100%;
                padding: 8px 15px;
                margin: 0;
                height: 150px;
                box-sizing: border-box;
            }
            
            .links-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 15px;
            }

            .subtitle .badge {
                font-size: 0.9em;
                padding: 8px 16px;
            }

            .weather-details {
                grid-template-columns: 1fr;
            }

            .weather-modal-content {
                padding: 20px;
            }

            .weather-main-temp h2 {
                font-size: 2em;
            }

            .clock-info {
                grid-template-columns: 1fr;
            }

            .clock-display {
                font-size: 2.5em;
            }

            .clock-modal-content, .server-modal-content {
                padding: 20px;
            }

            .server-status-text {
                font-size: 1.5em;
            }

            .server-status-icon {
                font-size: 3em;
            }

            .link-card-preview {
                min-width: 200px;
                padding: 12px;
                font-size: 0.85em;
                bottom: auto;
                top: 105%;
            }

            .preview-url {
                font-size: 0.7em;
                margin-bottom: 6px;
                padding-bottom: 6px;
            }

            .preview-stats {
                gap: 10px;
            }

            .offline-indicator {
                top: 5px;
                font-size: 0.75em;
                padding: 8px 15px;
                max-width: 90%;
                text-align: center;
            }

            .add-site-btn {
                width: 50px;
                height: 50px;
                font-size: 1.5em;
                bottom: 20px;
                right: 20px;
            }

            #soundToggle, #themeToggle {
                width: 45px !important;
                height: 45px !important;
                font-size: 1.2em !important;
            }
        }

        /* PASSWORD GENERATOR & NOTES - DARK TEXT FIX */
        #passwordModal .modal-content {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.98) 0%, rgba(219, 39, 119, 0.98) 100%) !important;
        }

        #passwordModal .modal-content * {
            color: white !important;
        }

        #passwordModal input[type="text"] {
            background: rgba(255, 255, 255, 0.2) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
            color: white !important;
        }

        #passwordModal input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.6) !important;
        }

        #passwordModal input[type="range"] {
            background: rgba(255, 255, 255, 0.3) !important;
        }

        #passwordModal label {
            color: white !important;
            font-weight: 600 !important;
        }

        #passwordModal #lengthValue {
            color: #00ffff !important;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            font-weight: 900 !important;
        }

        #passwordModal #strengthText {
            font-weight: 700 !important;
            text-shadow: 0 0 8px currentColor;
        }

        /* NOTES/TODO SYSTEM */
        #notesModal .modal-content {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95) 0%, rgba(219, 39, 119, 0.95) 100%) !important;
        }
        
        #notesModal .modal-content h2 {
            color: white !important;
        }
        
        #notesModal input[type="text"] {
            color: white !important;
        }
        
        #notesModal input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.6) !important;
        }
        
        #notesModal label {
            color: white !important;
        }
        
        #notesModal button {
            color: white !important;
        }
        
        .note-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .note-item:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .note-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        
        .note-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #10b981;
        }
        
        .note-text {
            flex: 1;
            color: white !important;
            font-size: 0.95em;
            word-break: break-word;
        }
        
        .note-text div {
            color: white !important;
        }
        
        .note-actions {
            display: flex;
            gap: 8px;
        }
        
        .note-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white !important;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }
        
        .note-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .note-btn.delete {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.6);
        }
        
        .note-btn.delete:hover {
            background: rgba(239, 68, 68, 0.5);
        }
        
        #notesModal #totalNotes,
        #notesModal #completedTodos,
        #notesModal #pendingTodos {
            color: inherit !important;
        }
        
        #notesModal button span {
            color: white !important;
        }
    </style>
</head>
<body>
    <div id="particles" class="particles"></div>
    
    <!-- Audio element for typing sound -->
    <audio id="typingSound" preload="auto">
        <source src="keyboard-typing-one-short-292592.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Audio System - All Sounds -->
    <audio id="clickSound" preload="auto"><source src="click.mp3" type="audio/mpeg"></audio>
    <audio id="categorySound" preload="auto"><source src="categorie.mp3" type="audio/mpeg"></audio>
    <audio id="toggleSound" preload="auto"><source src="toggle.mp3" type="audio/mpeg"></audio>
    <audio id="permanentSound" preload="auto"><source src="permanent.mp3" type="audio/mpeg"></audio>
    <audio id="notificationSound" preload="auto"><source src="notification-positive-bleep-joshua-chivers-1-00-01.mp3" type="audio/mpeg"></audio>
    <audio id="bleepSound" preload="auto"><source src="arcade-bleep-sound-6071.mp3" type="audio/mpeg"></audio>
    <audio id="thudSound" preload="auto"><source src="thud-sound-effect-319090.mp3" type="audio/mpeg"></audio>
    <audio id="serverBeepSound" preload="auto"><source src="ecg-machine-beep-gfx-sounds-1-1-00-00.mp3" type="audio/mpeg"></audio>
    
    <!-- Sound Control Toggle -->
    <button id="soundToggle" style="position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #10b981, #06b6d4); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(16, 185, 129, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="toggleSound()" title="Toggle Sound">
        üîä
    </button>

    <!-- Verification Button -->
    <button id="verifyButton" style="position: fixed; bottom: 310px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(59, 130, 246, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="showVerificationDashboard()" title="Verificare Date">
        üîç
    </button>

    <!-- Password Generator Button -->
    <button id="passwordGenButton" style="position: fixed; bottom: 240px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #ec4899, #be185d); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(236, 72, 153, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="openPasswordGenerator()" title="Generator Parole">
        üîê
    </button>

    <!-- Notes/Todo Button -->
    <button id="notesButton" style="position: fixed; bottom: 170px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #fbbf24, #f59e0b); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(251, 191, 36, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="openNotesModal()" title="Notes & Todo">
        üìù
    </button>
    
    <!-- Theme Toggle Button -->
    <button id="themeToggle" style="position: fixed; bottom: 100px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(102, 126, 234, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="cycleTheme()" title="Change Theme">
        üé®
    </button>

    <!-- Zoom Control Button -->
    <button id="zoomButton" style="position: fixed; bottom: 450px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #10b981, #059669); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(16, 185, 129, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 0.9em; display: flex; align-items: center; justify-content: center; font-weight: 900;" onclick="cycleZoom()" title="Zoom: 100%">
        100%
    </button>

    <!-- Export Button -->
    <button id="exportButton" style="position: fixed; bottom: 520px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #2563eb); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(59, 130, 246, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="exportLinks()" title="Export Link-uri">
        üì•
    </button>

    <!-- Import Button -->
    <button id="importButton" style="position: fixed; bottom: 590px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(139, 92, 246, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="document.getElementById('importFileInput').click()" title="Import Link-uri">
        üì§
    </button>

    <!-- Hidden file input for import -->
    <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="importLinks(event)">

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        üì° Offline Mode - Unele func»õii pot fi limitate
    </div>

    <!-- Weather Button -->
    <button id="weatherButton" style="position: fixed; bottom: 380px; right: 30px; width: 50px; height: 50px; background: linear-gradient(135deg, #06b6d4, #0ea5e9); border: none; border-radius: 50%; color: var(--text); cursor: pointer; box-shadow: 0 5px 20px rgba(6, 182, 212, 0.6); transition: all 0.3s ease; z-index: 100; font-size: 1.5em;" onclick="toggleWeatherModal()" title="Informa»õii Vreme">
        ‚òÅÔ∏è
    </button>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><span class="header-emoji">üöÄ</span> FAMILIA STREANGA CD»ò</h1>
            
            <!-- ONE COLUMN LAYOUT: Clock -->
            <div class="header-two-columns">
                <div class="header-center">
                    <div class="enhanced-clock-container">
                        <div class="time-date-inline">
                            <div class="main-time-display" id="mainTime">--:--:--</div>
                            <div class="full-date-display" id="fullDateMain">--</div>
                        </div>
                        
                        <div class="date-details-grid">
                            <div class="date-detail-item">
                                <div class="detail-emoji">üìÖ</div>
                                <div class="date-detail-label">
                                    <div class="detail-text">Zi SƒÉptƒÉm√¢nƒÉ</div>
                                    <div class="date-detail-value" id="dayNameMain">--</div>
                                </div>
                            </div>
                            <div class="date-detail-item">
                                <div class="detail-emoji">üìä</div>
                                <div class="date-detail-label">
                                    <div class="detail-text">SƒÉptƒÉm√¢na</div>
                                    <div class="date-detail-value" id="weekNumMain">--</div>
                                </div>
                            </div>
                            <div class="date-detail-item">
                                <div class="detail-emoji">üåç</div>
                                <div class="date-detail-label">
                                    <div class="detail-text">Zi din An</div>
                                    <div class="date-detail-value" id="dayOfYearMain">--</div>
                                </div>
                            </div>
                            <div class="date-detail-item">
                                <div class="detail-emoji">üóìÔ∏è</div>
                                <div class="date-detail-label">
                                    <div class="detail-text">An</div>
                                    <div class="date-detail-value" id="yearMain">--</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Google Search Bar - FULL WIDTH -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="googleSearchInput" placeholder="üîç CautƒÉ pe Google sau introdu URL..." 
                       onkeypress="if(event.key==='Enter') performGoogleSearch()"
                       oninput="toggleClearButton('googleSearchInput', 'googleClearBtn')">
                <button class="input-clear-btn" id="googleClearBtn" onclick="clearGoogleSearch()" title="»òterge (ESC)">‚úï</button>
                <button onclick="performGoogleSearch()">CautƒÉ</button>
            </div>
        </div>

        <!-- Search History - FULL WIDTH -->
        <div class="search-container">
            <div class="search-history" id="searchHistory">
                <div class="search-history-header">
                    <div class="search-history-title">
                        <i class="fas fa-history"></i>
                        Ultimele cƒÉutƒÉri
                    </div>
                    <div>
                        <button class="sort-toggle" onclick="toggleSortMode()" id="sortButton">
                            <i class="fas fa-sort"></i> Sortare: Frecven»õƒÉ
                        </button>
                        <button class="clear-history" onclick="clearSearchHistory()">
                            <i class="fas fa-trash"></i> »òterge
                        </button>
                    </div>
                </div>
                <div class="search-history-items" id="searchHistoryItems">
                    <!-- History items will be added here -->
                </div>
            </div>
        </div>

        <!-- Button Filter - FULL WIDTH -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="filterInput" placeholder="üîç CautƒÉ site sau categorie (ex: email, filme, youtube)..." 
                       oninput="filterButtons(); toggleClearButton('filterInput', 'filterClearBtn');">
                <button class="filter-clear-btn" id="filterClearBtn" onclick="clearFilterInput()" title="»òterge (ESC)">‚úï</button>
            </div>
        </div>

        <!-- Links Grid -->
        <div class="links-grid" id="linksGrid"></div>
    </div>

    <!-- Add Site Button -->
    <button class="add-site-btn" onclick="openAddModal()">+</button>

    <!-- Add Site Modal -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">‚ûï AdaugƒÉ Site Nou</h2>
            <label style="color: #000000; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üìù Nume Site:</label>
            <input type="text" id="siteName" placeholder="Nume site (ex: YouTube)">
            <label style="color: #000000; display: block; font-size: 0.9em; margin-top: 10px; margin-bottom: 3px; font-weight: 700;">üîó URL:</label>
            <input type="text" id="siteUrl" placeholder="URL (ex: https://youtube.com)">
            <label style="color: #000000; display: block; font-size: 0.9em; margin-top: 10px; margin-bottom: 3px; font-weight: 700;">üìÅ Categorie:</label>
            <select id="siteCategory">
                <option value="">-- üìã SelecteazƒÉ Categoria --</option>
            </select>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="addSite()">‚úÖ AdaugƒÉ</button>
                <button class="btn-secondary" onclick="closeAddModal()">‚ùå AnuleazƒÉ</button>
            </div>
        </div>
    </div>

    <!-- Edit Site Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2 style="margin-bottom: 15px;">‚úèÔ∏è EditeazƒÉ Site</h2>
            
            <label style="color: #000000; margin-top: 5px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üìù Nume Site:</label>
            <input type="text" id="editSiteName" placeholder="Nume site (ex: YouTube)">
            
            <label style="color: #000000; margin-top: 10px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üîó URL Site:</label>
            <input type="text" id="editSiteUrl" placeholder="URL (ex: https://youtube.com)">
            
            <label style="color: #000000; margin-top: 10px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üñºÔ∏è URL Icon/PozƒÉ (op»õional):</label>
            <input type="text" id="editIconUrl" placeholder="ex: https://example.com/logo.png">
            <div style="color: rgba(0, 0, 0, 0.7); font-size: 0.75em; margin: 3px 0; font-weight: 600;">
                üí° PNG, JPG, SVG. Gol = favicon automat
            </div>
            
            <label style="color: #000000; margin-top: 10px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üìÅ Categorie:</label>
            <select id="editSiteCategory">
                <option value="">-- üìã SelecteazƒÉ Categoria --</option>
            </select>
            
            <label style="color: #000000; margin-top: 10px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üè∑Ô∏è Tags (op»õional):</label>
            <input type="text" id="editSiteTags" placeholder="ex: video, music">
            
            <label style="color: #000000; margin-top: 10px; display: block; font-size: 0.9em; margin-bottom: 3px; font-weight: 700;">üìí Note Personale:</label>
            <textarea id="editSiteNotes" placeholder="Note..." style="width: 100%; padding: 10px; margin: 5px 0; border: 3px solid #000000; border-radius: 10px; background: rgba(255, 255, 255, 0.9); color: #000000; font-size: 0.9em; outline: none; backdrop-filter: blur(10px); resize: vertical; min-height: 50px; font-family: inherit;"></textarea>
            
            <div class="modal-buttons" style="margin-top: 15px;">
                <button class="btn-primary" onclick="saveEditSite()">üíæ SalveazƒÉ</button>
                <button class="btn-secondary" onclick="closeEditModal()">‚ùå AnuleazƒÉ</button>
                <button class="btn-secondary" onclick="deleteSite()" style="background: rgba(239, 68, 68, 0.3); border-color: var(--danger);">üóëÔ∏è »òterge</button>
            </div>
        </div>
    </div>

    <!-- Weather Modal -->
    <div class="weather-modal" id="weatherModal" onclick="if(event.target === this) closeWeatherModal()">
        <div class="weather-modal-content">
            <button class="weather-modal-close" onclick="closeWeatherModal()">‚úï</button>
            
            <h2 style="color: #ffffff; margin-bottom: 15px; text-align: center;">üå§Ô∏è Informa»õii Vreme</h2>
            
            <div class="weather-main-temp">
                <h2 id="modalMainTemp">--¬∞C</h2>
                <p id="modalLocation">Loading...</p>
                <p id="modalDescription">--</p>
                <p id="modalUpdated" style="font-size: 0.75em; margin-top: 10px; opacity: 0.8;">--</p>
            </div>

            <div class="weather-details" id="weatherDetails">
                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üå°Ô∏è</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Temperatura resim»õitƒÉ</div>
                        <div class="weather-detail-value" id="feelsLike">--¬∞C</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üíß</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Umiditate</div>
                        <div class="weather-detail-value" id="humidity">--%</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üå™Ô∏è</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">V√¢nt</div>
                        <div class="weather-detail-value" id="wind">-- km/h</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üîΩ</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Presiune</div>
                        <div class="weather-detail-value" id="pressure">-- hPa</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üëÅÔ∏è</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Vizibilitate</div>
                        <div class="weather-detail-value" id="visibility">-- km</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üåÖ</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">RƒÉsƒÉrit</div>
                        <div class="weather-detail-value" id="sunrise">--:--</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">üåá</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Apus</div>
                        <div class="weather-detail-value" id="sunset">--:--</div>
                    </div>
                </div>

                <div class="weather-detail-item">
                    <div class="weather-detail-icon">‚òÅÔ∏è</div>
                    <div class="weather-detail-text">
                        <div class="weather-detail-label">Acoperire nori</div>
                        <div class="weather-detail-value" id="cloudcover">--%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Clock Modal -->
    <div class="clock-modal" id="clockModal" onclick="if(event.target === this) closeClockModal()">
        <div class="clock-modal-content">
            <button class="clock-modal-close" onclick="closeClockModal()">‚úï</button>
            
            <h2 style="color: var(--primary); margin-bottom: 20px;">üïê Informa»õii Ceas</h2>
            
            <div class="clock-display" id="modalClockTime">--:--:--</div>
            
            <div class="clock-info">
                <div class="clock-info-item">
                    <div class="clock-info-label">üìÖ DatƒÉ completƒÉ</div>
                    <div class="clock-info-value" id="fullDate">--</div>
                </div>
                <div class="clock-info-item">
                    <div class="clock-info-label">üìÜ Zi din sƒÉptƒÉm√¢nƒÉ</div>
                    <div class="clock-info-value" id="dayOfWeek">--</div>
                </div>
                <div class="clock-info-item">
                    <div class="clock-info-label">üåç Zi din an</div>
                    <div class="clock-info-value" id="dayOfYear">--</div>
                </div>
                <div class="clock-info-item">
                    <div class="clock-info-label">üìä SƒÉptƒÉm√¢na</div>
                    <div class="clock-info-value" id="weekNumber">--</div>
                </div>
                <div class="clock-info-item">
                    <div class="clock-info-label">üåê Fus orar</div>
                    <div class="clock-info-value" id="timezone">--</div>
                </div>
                <div class="clock-info-item">
                    <div class="clock-info-label">‚è∞ UTC Offset</div>
                    <div class="clock-info-value" id="utcOffset">--</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Generator Modal -->
    <div class="modal" id="passwordModal">
        <div class="modal-content" style="max-width: 600px;">
            <h2 style="margin-bottom: 20px; text-align: center;">üîê Generator Parole Sigure</h2>
            
            <!-- Password Display -->
            <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2)); border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 15px; padding: 20px; margin-bottom: 20px; text-align: center; position: relative;">
                <div id="generatedPassword" style="font-size: 1.5em; font-weight: 700; color: #fff; word-break: break-all; font-family: 'Courier New', monospace; min-height: 40px; display: flex; align-items: center; justify-content: center;">
                    Click Generate pentru parolƒÉ
                </div>
                <button onclick="copyPassword()" style="position: absolute; top: 10px; right: 10px; background: rgba(16, 185, 129, 0.8); border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9em; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(16, 185, 129, 1)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.8)'">
                    üìã Copy
                </button>
            </div>
            
            <!-- Strength Indicator -->
            <div style="margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: white; font-size: 0.9em; font-weight: 600;">Putere parolƒÉ:</span>
                    <span id="strengthText" style="color: #fbbf24; font-weight: 700;">-</span>
                </div>
                <div style="height: 8px; background: rgba(255, 255, 255, 0.2); border-radius: 10px; overflow: hidden;">
                    <div id="strengthBar" style="height: 100%; width: 0%; background: linear-gradient(135deg, #ef4444, #fbbf24); transition: all 0.3s ease; border-radius: 10px;"></div>
                </div>
            </div>
            
            <!-- Options -->
            <div style="background: rgba(255, 255, 255, 0.15); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <label style="color: white; display: block; margin-bottom: 10px; font-weight: 600;">
                    üìè Lungime: <span id="lengthValue" style="color: #00ffff; font-weight: 700;">16</span>
                </label>
                <input type="range" id="passwordLength" min="8" max="64" value="16" style="width: 100%; margin-bottom: 20px;" oninput="document.getElementById('lengthValue').textContent = this.value">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <label style="color: white; display: flex; align-items: center; cursor: pointer; font-weight: 600;">
                        <input type="checkbox" id="includeUppercase" checked style="width: auto; margin-right: 10px; cursor: pointer;">
                        üî† Litere mari (A-Z)
                    </label>
                    <label style="color: white; display: flex; align-items: center; cursor: pointer; font-weight: 600;">
                        <input type="checkbox" id="includeLowercase" checked style="width: auto; margin-right: 10px; cursor: pointer;">
                        üî° Litere mici (a-z)
                    </label>
                    <label style="color: white; display: flex; align-items: center; cursor: pointer; font-weight: 600;">
                        <input type="checkbox" id="includeNumbers" checked style="width: auto; margin-right: 10px; cursor: pointer;">
                        üî¢ Numere (0-9)
                    </label>
                    <label style="color: white; display: flex; align-items: center; cursor: pointer; font-weight: 600;">
                        <input type="checkbox" id="includeSymbols" checked style="width: auto; margin-right: 10px; cursor: pointer;">
                        üî£ Simboluri (!@#$...)
                    </label>
                </div>
            </div>
            
            <!-- History -->
            <div style="background: rgba(255, 255, 255, 0.15); padding: 15px; border-radius: 15px; margin-bottom: 20px; max-height: 150px; overflow-y: auto;">
                <div style="color: white; font-weight: 600; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                    üïê Istoric Recent
                    <button onclick="clearPasswordHistory()" style="margin-left: auto; background: rgba(239, 68, 68, 0.3); border: 1px solid var(--danger); color: white; padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8em;">
                        üóëÔ∏è »òterge
                    </button>
                </div>
                <div id="passwordHistory" style="display: flex; flex-direction: column; gap: 8px; font-family: 'Courier New', monospace; font-size: 0.85em;">
                    <div style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 10px;">Nicio parolƒÉ generatƒÉ √ÆncƒÉ</div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-primary" onclick="generatePassword()" style="flex: 2;">üé≤ GenereazƒÉ ParolƒÉ</button>
                <button class="btn-secondary" onclick="closePasswordGenerator()">‚ùå √énchide</button>
            </div>
        </div>
    </div>

    <!-- Notes/Todo Modal -->
    <div class="modal" id="notesModal">
        <div class="modal-content" style="max-width: 700px;">
            <h2 style="margin-bottom: 20px; text-align: center;">üìù Notes & Todo List</h2>
            
            <!-- Add Note Section -->
            <div style="background: rgba(255, 255, 255, 0.15); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <input type="text" id="noteInput" placeholder="‚úçÔ∏è AdaugƒÉ notƒÉ sau task..." style="flex: 1; padding: 12px; border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 10px; background: rgba(255, 255, 255, 0.2); color: white; font-size: 0.95em;" onkeypress="if(event.key==='Enter') addNote()">
                    <button onclick="addNote()" style="background: linear-gradient(135deg, #10b981, #059669); border: none; color: white; padding: 12px 24px; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 0.95em; transition: all 0.3s ease; white-space: nowrap;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        ‚ûï AdaugƒÉ
                    </button>
                </div>
                
                <!-- Category/Type selector -->
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="color: white; display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.9em;">
                        <input type="radio" name="noteType" value="note" checked style="cursor: pointer; accent-color: #fbbf24;">
                        üìù NotƒÉ
                    </label>
                    <label style="color: white; display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.9em;">
                        <input type="radio" name="noteType" value="todo" style="cursor: pointer; accent-color: #10b981;">
                        ‚úÖ Todo
                    </label>
                    <label style="color: white; display: flex; align-items: center; gap: 6px; cursor: pointer; font-size: 0.9em;">
                        <input type="radio" name="noteType" value="important" style="cursor: pointer; accent-color: #ef4444;">
                        ‚≠ê Important
                    </label>
                </div>
            </div>
            
            <!-- Stats Bar -->
            <div style="display: flex; gap: 15px; margin-bottom: 15px; padding: 12px; background: rgba(255, 255, 255, 0.1); border-radius: 10px;">
                <div style="flex: 1; text-align: center;">
                    <div style="color: #fbbf24; font-size: 1.5em; font-weight: 700;" id="totalNotes">0</div>
                    <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.8em;">Total</div>
                </div>
                <div style="flex: 1; text-align: center;">
                    <div style="color: #10b981; font-size: 1.5em; font-weight: 700;" id="completedTodos">0</div>
                    <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.8em;">Completate</div>
                </div>
                <div style="flex: 1; text-align: center;">
                    <div style="color: #ef4444; font-size: 1.5em; font-weight: 700;" id="pendingTodos">0</div>
                    <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.8em;">Pending</div>
                </div>
            </div>
            
            <!-- Filter Buttons -->
            <div style="display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap;">
                <button onclick="filterNotes('all')" id="filterAll" style="background: rgba(255, 255, 255, 0.3); border: 2px solid rgba(255, 255, 255, 0.5); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85em; font-weight: 600;">
                    üìã Toate (<span id="countAll">0</span>)
                </button>
                <button onclick="filterNotes('todo')" id="filterTodo" style="background: rgba(255, 255, 255, 0.15); border: 2px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85em;">
                    ‚úÖ Todo (<span id="countTodo">0</span>)
                </button>
                <button onclick="filterNotes('note')" id="filterNote" style="background: rgba(255, 255, 255, 0.15); border: 2px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85em;">
                    üìù Notes (<span id="countNote">0</span>)
                </button>
                <button onclick="filterNotes('important')" id="filterImportant" style="background: rgba(255, 255, 255, 0.15); border: 2px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85em;">
                    ‚≠ê Important (<span id="countImportant">0</span>)
                </button>
                <button onclick="clearCompletedNotes()" style="margin-left: auto; background: rgba(239, 68, 68, 0.3); border: 2px solid rgba(239, 68, 68, 0.5); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.85em;">
                    üóëÔ∏è »òterge completate
                </button>
            </div>
            
            <!-- Notes List -->
            <div id="notesList" style="max-height: 400px; overflow-y: auto; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; margin-bottom: 20px;">
                <div style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 40px 20px;">
                    üìù Nicio notƒÉ √ÆncƒÉ. AdaugƒÉ prima ta notƒÉ!
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeNotesModal()">‚ùå √énchide</button>
            </div>
        </div>
    </div>

    <script>
        // ===== PREVENT ZOOM ONLY ON MOBILE =====
        (function() {
            'use strict';
            
            const isMobile = () => {
                const isSmallScreen = window.matchMedia('(max-width: 1024px)').matches;
                const hasTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
                const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;
                const isMobileUA = mobileRegex.test(navigator.userAgent);
                
                return (isSmallScreen && hasTouch) || isMobileUA;
            };
            
            if (!isMobile()) {
                console.log('Desktop detected - zoom allowed');
                return;
            }
            
            console.log('Mobile detected - zoom prevention active');
            
            const forceZoom = () => {
                if (document.body) {
                    document.body.style.zoom = '1';
                    document.body.style.transform = 'scale(1)';
                }
                if (document.documentElement) {
                    document.documentElement.style.zoom = '1';
                    document.documentElement.style.transform = 'scale(1)';
                }
            };
            
            const preventZoomGesture = (e) => {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                forceZoom();
                return false;
            };
            
            ['gesturestart', 'gesturechange', 'gestureend'].forEach(event => {
                document.addEventListener(event, preventZoomGesture, { capture: true, passive: false });
                window.addEventListener(event, preventZoomGesture, { capture: true, passive: false });
            });
            
            document.addEventListener('touchstart', function(e) {
                if (e.touches && e.touches.length > 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    forceZoom();
                    return false;
                }
            }, { capture: true, passive: false });
            
            document.addEventListener('touchmove', function(e) {
                if (e.touches && e.touches.length > 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    forceZoom();
                    return false;
                }
                if (e.scale && e.scale !== 1) {
                    e.preventDefault();
                    e.stopPropagation();
                    forceZoom();
                    return false;
                }
            }, { capture: true, passive: false });
            
            let lastTap = 0;
            document.addEventListener('touchend', function(e) {
                const now = Date.now();
                const isInteractive = e.target.closest('button, a, input, textarea, select, .link-card, .badge, [onclick]');
                if (!isInteractive && (now - lastTap <= 300)) {
                    e.preventDefault();
                    e.stopPropagation();
                    forceZoom();
                    return false;
                }
                lastTap = now;
            }, { capture: true, passive: false });
            
            ['load', 'resize', 'orientationchange', 'visibilitychange'].forEach(event => {
                window.addEventListener(event, forceZoom, { capture: true });
            });
            
            setInterval(forceZoom, 50);
            forceZoom();
            document.addEventListener('DOMContentLoaded', forceZoom);
            
        })();
        
        // ===== THEME SYSTEM =====
        const THEMES = ['purple', 'neon', 'sunset', 'ocean', 'light'];
        const THEME_KEY = 'selectedTheme_v1';
        let currentThemeIndex = 0;
        
        // ===== ZOOM SYSTEM =====
        const ZOOM_LEVELS = [70, 80, 90, 100, 110];
        const ZOOM_KEY = 'zoomLevel_v1';
        let currentZoomIndex = 3; // Default: 100%
        
        function loadZoom() {
            try {
                const saved = localStorage.getItem(ZOOM_KEY);
                if (saved) {
                    const zoomValue = parseInt(saved);
                    const index = ZOOM_LEVELS.indexOf(zoomValue);
                    if (index !== -1) {
                        currentZoomIndex = index;
                        applyZoom(zoomValue);
                        return;
                    }
                }
            } catch (e) {
                console.error('Error loading zoom:', e);
            }
            applyZoom(100);
        }
        
        function applyZoom(level) {
            // ‚úÖ APLICƒÇ ZOOM DOAR PE CONTAINER, NU PE BODY
            const container = document.querySelector('.container');
            if (container) {
                container.style.zoom = (level / 100);
            }
            
            // AplicƒÉ »ôi pe header pentru consisten»õƒÉ
            const header = document.querySelector('.header');
            if (header) {
                header.style.zoom = (level / 100);
            }
            
            updateZoomButton(level);
            
            try {
                localStorage.setItem(ZOOM_KEY, level.toString());
            } catch (e) {
                console.error('Error saving zoom:', e);
            }
        }
        
        function updateZoomButton(level) {
            const btn = document.getElementById('zoomButton');
            if (btn) {
                btn.textContent = level + '%';
                btn.title = `Zoom: ${level}% (click pentru schimbare)`;
                
                // Culoare diferitƒÉ pentru fiecare nivel
                const colors = {
                    70: 'linear-gradient(135deg, #ef4444, #dc2626)',   // Ro»ôu
                    80: 'linear-gradient(135deg, #f59e0b, #d97706)',   // Portocaliu
                    90: 'linear-gradient(135deg, #fbbf24, #f59e0b)',   // Galben
                    100: 'linear-gradient(135deg, #10b981, #059669)',  // Verde (normal)
                    110: 'linear-gradient(135deg, #06b6d4, #0891b2)'   // Cyan (mƒÉrit)
                };
                btn.style.background = colors[level] || colors[100];
            }
        }
        
        function cycleZoom() {
            playSound('toggleSound', 0.3);
            
            currentZoomIndex = (currentZoomIndex + 1) % ZOOM_LEVELS.length;
            const newZoom = ZOOM_LEVELS[currentZoomIndex];
            
            applyZoom(newZoom);
            
            const emoji = newZoom < 100 ? 'üîç' : newZoom > 100 ? 'üîé' : '‚úÖ';
            showNotification(`${emoji} Zoom: ${newZoom}%`, 'success');
        }
        
        const THEME_INFO = {
            purple: { name: 'üíú Purple Dream', emoji: 'üíú' },
            neon: { name: 'üíö Neon Night', emoji: 'üíö' },
            sunset: { name: 'üåÖ Sunset Vibes', emoji: 'üåÖ' },
            ocean: { name: 'üåä Ocean Breeze', emoji: 'üåä' },
            light: { name: '‚òÄÔ∏è Light Mode', emoji: '‚òÄÔ∏è' }
        };
        
        function loadTheme() {
            try {
                const saved = localStorage.getItem(THEME_KEY);
                if (saved && THEMES.includes(saved)) {
                    const index = THEMES.indexOf(saved);
                    currentThemeIndex = index;
                    applyTheme(saved);
                } else {
                    applyTheme(THEMES[0]);
                }
            } catch (e) {
                applyTheme(THEMES[0]);
            }
        }
        
        function applyTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            updateThemeButton(theme);
        }
        
        function updateThemeButton(theme) {
            const btn = document.getElementById('themeToggle');
            if (btn) {
                btn.textContent = THEME_INFO[theme].emoji;
                btn.title = `Current: ${THEME_INFO[theme].name}`;
                
                const gradients = {
                    purple: 'linear-gradient(135deg, #667eea, #764ba2)',
                    neon: 'linear-gradient(135deg, #10b981, #06b6d4)',
                    sunset: 'linear-gradient(135deg, #fb923c, #ef4444)',
                    ocean: 'linear-gradient(135deg, #06b6d4, #0ea5e9)',
                    light: 'linear-gradient(135deg, #3b82f6, #8b5cf6)'
                };
                btn.style.background = gradients[theme];
            }
        }
        
        function cycleTheme() {
            playSound('categorySound', 0.4);
            currentThemeIndex = (currentThemeIndex + 1) % THEMES.length;
            const newTheme = THEMES[currentThemeIndex];
            
            applyTheme(newTheme);
            localStorage.setItem(THEME_KEY, newTheme);
            
            showNotification(`üé® Theme: ${THEME_INFO[newTheme].name}`, 'success');
        }
        
        // ===== AUDIO SYSTEM =====
        const SOUND_ENABLED_KEY = 'soundEnabled_v1';
        let soundEnabled = true;
        
        function loadSoundSettings() {
            try {
                const saved = localStorage.getItem(SOUND_ENABLED_KEY);
                soundEnabled = saved === null ? true : saved === 'true';
                updateSoundButton();
            } catch (e) {
                soundEnabled = true;
            }
        }
        
        function toggleSound() {
            soundEnabled = !soundEnabled;
            localStorage.setItem(SOUND_ENABLED_KEY, soundEnabled.toString());
            updateSoundButton();
            
            if (soundEnabled) {
                playSound('bleepSound', 0.3);
                showNotification('üîä Sunete activate', 'success');
            } else {
                showNotification('üîá Sunete dezactivate', 'info');
            }
        }
        
        function updateSoundButton() {
            const btn = document.getElementById('soundToggle');
            if (btn) {
                btn.textContent = soundEnabled ? 'üîä' : 'üîá';
                btn.title = soundEnabled ? 'DezactiveazƒÉ sunete' : 'ActiveazƒÉ sunete';
            }
        }
        
        function playSound(soundId, volume = 0.5) {
            if (!soundEnabled) return;
            
            try {
                const sound = document.getElementById(soundId);
                if (sound) {
                    sound.currentTime = 0;
                    sound.volume = volume;
                    sound.play().catch(e => console.log('Sound play error:', e));
                }
            } catch (e) {
                console.error('Error playing sound:', e);
            }
        }
        
        let lastTypingTime = 0;
        const typingDelay = 100;

        function playTypingSound() {
            const now = Date.now();
            if (now - lastTypingTime > typingDelay) {
                playSound('typingSound', 0.3);
                lastTypingTime = now;
            }
        }

        function playNotificationBeep() {
            if (!soundEnabled) return;
            playSound('serverBeepSound', 0.4);
        }

        // All site links data
        let links = [
            { name: "Yahoo", url: "https://mail.yahoo.com/d/folders/1", category: "email" },
            { name: "Gmail", url: "https://mail.google.com", category: "email" },
            { name: "YouTube", url: "https://www.youtube.com", category: "video" },
            { name: "Facebook", url: "https://www.facebook.com", category: "social" },
            { name: "eBay", url: "https://www.ebay.com", category: "shopping" },
            { name: "eBay UK", url: "https://www.ebay.co.uk", category: "shopping" },
            { name: "AliExpress", url: "https://www.aliexpress.com", category: "shopping" },
            { name: "ClickSud", url: "https://clicksud.co/", category: "filme" },
            { name: "Filelist", url: "https://filelist.io/login.php", category: "fisiere" },
            { name: "DivX Filme", url: "https://divxfilmeonline.tv/filme-online/", category: "filme" },
            { name: "IMDB", url: "https://www.imdb.com/watchlist", category: "filme" },
            { name: "FilmeHD API", url: "https://filmehd.se/wp-json", category: "filme" },
            { name: "Vox Filme", url: "https://voxfilmeonline.biz/", category: "filme" },
            { name: "JustWatch", url: "https://www.justwatch.com/ro/filme", category: "filme" },
            { name: "Portalul TV", url: "https://portalultautv.biz/", category: "filme" },
            { name: "Top Filme HD", url: "https://www.topfilmehd.ro/", category: "filme" },
            { name: "Cinepub", url: "https://cinepub.ro/", category: "filme" },
            { name: "Pluto TV", url: "https://pluto.tv/uk/hub/home", category: "filme" },
            { name: "Despre Seriale", url: "https://despre-seriale.net/", category: "filme" },
            { name: "Voyo", url: "https://voyo.ro/", category: "filme" },
            { name: "Filmflix", url: "https://filmflix.ro/", category: "filme" },
            { name: "Tubi", url: "https://tubitv.com/", category: "filme" },
            { name: "123Movies", url: "https://123moviesonl.net/", category: "filme" },
            { name: "Crackle", url: "https://www.crackle.com/", category: "filme" },
            { name: "Roku", url: "https://www.roku.com/en-gb/", category: "filme" },
            { name: "Filmzie", url: "https://filmzie.com/home", category: "filme" },
            { name: "Yidio", url: "https://www.yidio.com/", category: "filme" },
            { name: "Fawesome", url: "https://fawesome.tv/home/", category: "filme" },
            { name: "CONtv", url: "https://www.contv.com/", category: "filme" },
            { name: "Cineby", url: "https://www.cineby.app/browse/movie", category: "filme" },
            { name: "DeepAI", url: "https://deepai.org/", category: "ai" },
            { name: "OpenAI", url: "https://openai.com", category: "ai" },
            { name: "DeepSeek", url: "https://deepseek.ai", category: "ai" },
            { name: "Gemini AI", url: "https://gemini.google.com", category: "ai" },
            { name: "Arduino", url: "https://www.arduino.cc", category: "electronics" },
            { name: "Blynk", url: "https://blynk.io", category: "electronics" },
            { name: "Adafruit", url: "https://www.adafruit.com", category: "electronics" },
            { name: "App Inventor", url: "https://appinventor.mit.edu", category: "development" },
            { name: "GitHub", url: "https://github.com", category: "development" },
            { name: "Kodular", url: "https://www.kodular.io", category: "development" },
            { name: "MakeWithTech", url: "https://makewithtech.com", category: "development" },
            { name: "Dropbox", url: "https://www.dropbox.com", category: "storage" },
            { name: "Microsoft", url: "https://www.microsoft.com", category: "tech" },
            { name: "TeamViewer", url: "https://www.teamviewer.com", category: "tech" },
            { name: "ElevenLabs", url: "https://elevenlabs.io", category: "audio" },
            { name: "Fiverr", url: "https://www.fiverr.com", category: "services" },
            { name: "Lebara", url: "https://www.lebara.com", category: "services" },
            { name: "Octopus Energy", url: "https://octopus.energy", category: "services" },
            { name: "Virgin Media", url: "https://www.virginmedia.com", category: "services" },
            { name: "PayPal", url: "https://www.paypal.com", category: "finance" },
            { name: "Council Tax", url: "https://www.telford.gov.uk/info/20110/council_tax", category: "finance" },
            { name: "Standard Life", url: "https://www.standardlife.co.uk", category: "finance" },
            { name: "Trading212", url: "https://www.trading212.com", category: "finance" },
            { name: "eToro", url: "https://www.etoro.com", category: "finance" },
            { name: "Universal Credit", url: "https://www.gov.uk/universal-credit", category: "gov" },
            { name: "DeepL", url: "https://www.deepl.com", category: "translation" },
            { name: "Amazon Translate", url: "https://aws.amazon.com/translate/", category: "translation" },
            { name: "Smartcat", url: "https://www.smartcat.com/", category: "translation" },
            { name: "Bing Translator", url: "https://www.bing.com/translator", category: "translation" },
            { name: "Surfshark", url: "https://surfshark.com", category: "security" },
            { name: "TotalAV", url: "https://www.totalav.com", category: "security" },
            { name: "QuillBot", url: "https://www.quillbot.com", category: "writing" },
            { name: "Grammarly", url: "https://www.grammarly.com/", category: "writing" },
            { name: "Ginger", url: "https://www.gingersoftware.com/", category: "writing" },
            { name: "Hemingway", url: "http://www.hemingwayapp.com/", category: "writing" },
            { name: "GrammarCheck", url: "https://www.grammarcheck.net/", category: "writing" },
            { name: "Scribbr", url: "https://www.scribbr.com/", category: "writing" }
        ];

        const FAVORITES_KEY = 'favoriteLinks_v1';
        const CUSTOM_ORDER_KEY = 'customOrder_v1';
        const VISIT_STATS_KEY = 'visitStats_v1';
        let favorites = new Set();
        let customOrder = [];
        let draggedElement = null;
        let draggedIndex = null;
        let visitStats = {};

        const CATEGORIES = [
            { key: "all", label: "All", icon: "fa-th" },
            { key: "email", label: "Email", icon: "fa-envelope" },
            { key: "video", label: "Video", icon: "fa-video" },
            { key: "social", label: "Social", icon: "fa-users" },
            { key: "shopping", label: "Shopping", icon: "fa-shopping-cart" },
            { key: "filme", label: "Filme", icon: "fa-film" },
            { key: "fisiere", label: "Fisiere", icon: "fa-folder" },
            { key: "ai", label: "AI", icon: "fa-robot" },
            { key: "electronics", label: "Electronics", icon: "fa-microchip" },
            { key: "development", label: "Development", icon: "fa-code" },
            { key: "storage", label: "Storage", icon: "fa-database" },
            { key: "tech", label: "Tech", icon: "fa-laptop" },
            { key: "audio", label: "Audio", icon: "fa-music" },
            { key: "services", label: "Services", icon: "fa-cogs" },
            { key: "finance", label: "Finance", icon: "fa-coins" },
            { key: "gov", label: "Gov", icon: "fa-landmark" },
            { key: "translation", label: "Translation", icon: "fa-language" },
            { key: "security", label: "Security", icon: "fa-shield-alt" },
            { key: "writing", label: "Writing", icon: "fa-pen" }
        ];

        let currentFilter = 'all';
        let sortByFrequency = true;

        const HISTORY_KEY = 'searchHistory_v1';
        
        function getSearchHistory() {
            try {
                const data = localStorage.getItem(HISTORY_KEY);
                return data ? JSON.parse(data) : [];
            } catch (e) {
                return [];
            }
        }

        function saveSearchHistory(history) {
            try {
                localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            } catch (e) {
                console.error('Error saving search history:', e);
            }
        }

        function addToSearchHistory(query) {
            let history = getSearchHistory();
            const existing = history.find(item => item.query.toLowerCase() === query.toLowerCase());
            
            if (existing) {
                existing.count++;
                existing.lastUsed = Date.now();
            } else {
                history.push({
                    query: query,
                    count: 1,
                    lastUsed: Date.now()
                });
            }
            
            saveSearchHistory(history);
            renderSearchHistory();
        }

        function renderSearchHistory() {
            const container = document.getElementById('searchHistoryItems');
            let history = getSearchHistory();
            
            if (history.length === 0) {
                container.innerHTML = '<div style="color: var(--text-dim); text-align: center;">Nu existƒÉ cƒÉutƒÉri recente</div>';
                return;
            }
            
            if (sortByFrequency) {
                history.sort((a, b) => b.count - a.count || b.lastUsed - a.lastUsed);
            } else {
                history.sort((a, b) => b.lastUsed - a.lastUsed);
            }
            
            const top10 = history.slice(0, 10);
            container.innerHTML = top10.map(item => `
                <div class="search-history-item" onclick="searchFromHistory('${item.query.replace(/'/g, "\\'")}')">
                    ${item.query}
                    <span class="search-count">${item.count}</span>
                </div>
            `).join('');
        }

        function searchFromHistory(query) {
            document.getElementById('googleSearchInput').value = query;
            performGoogleSearch();
        }

        function toggleSortMode() {
            sortByFrequency = !sortByFrequency;
            document.getElementById('sortButton').innerHTML = sortByFrequency 
                ? '<i class="fas fa-sort-amount-down"></i> Sortare: Frecven»õƒÉ'
                : '<i class="fas fa-clock"></i> Sortare: Recente';
            renderSearchHistory();
        }

        function clearSearchHistory() {
            if (confirm('Sigur vrei sƒÉ »ôtergi istoricul cƒÉutƒÉrilor?')) {
                localStorage.removeItem(HISTORY_KEY);
                renderSearchHistory();
            }
        }

        function populateCategorySelect() {
            const sel = document.getElementById("siteCategory");
            const editSel = document.getElementById("editSiteCategory");
            
            const options = '<option value="">-- SelecteazƒÉ Categoria --</option>' +
                CATEGORIES.filter(c => c.key !== "all").map(c => 
                    `<option value="${c.key}">${c.label}</option>`
                ).join('');
            
            if (sel) sel.innerHTML = options;
            if (editSel) editSel.innerHTML = options;
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            loadZoom();
            loadSoundSettings();
            
            const linksLoaded = loadAllLinks();
            if (!linksLoaded) {
                loadCustomLinks();
            }
            
            loadFavorites();
            loadCustomOrder();
            loadVisitStats();
            initOfflineDetection();
            adjustMobilePlaceholder();
            
            createParticles();
            populateCategorySelect();
            renderLinks();
            renderSearchHistory();
            updateClock();
            loadWeather();
            setInterval(updateClock, 1000);

            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.addEventListener('keydown', playTypingSound);
            });
            
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => playSound('toggleSound', 0.3));
            });
            
            const buttons = document.querySelectorAll('button:not(#soundToggle)');
            buttons.forEach(button => {
                button.addEventListener('click', () => playSound('clickSound', 0.2));
            });
            
            // ===== ESC KEY TO CLEAR SEARCH INPUTS =====
            const googleSearchInput = document.getElementById('googleSearchInput');
            const filterInput = document.getElementById('filterInput');
            
            // ESC pe Google Search
            if (googleSearchInput) {
                googleSearchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        googleSearchInput.value = '';
                        googleSearchInput.blur();
                        toggleClearButton('googleSearchInput', 'googleClearBtn');
                        playSound('thudSound', 0.2);
                        showNotification('üóëÔ∏è CƒÉutare »ôtearsƒÉ', 'info');
                    }
                });
            }
            
            // ESC pe Filter Input
            if (filterInput) {
                filterInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        filterInput.value = '';
                        filterInput.blur();
                        filterButtons(); // Reset filter
                        toggleClearButton('filterInput', 'filterClearBtn');
                        playSound('thudSound', 0.2);
                        showNotification('üóëÔ∏è Filtru »ôters', 'info');
                    }
                });
            }
            
            // GLOBAL ESC - √énchide modale »ôi »ôterge input activ
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    // √énchide toate modalele
                    document.querySelectorAll('.modal.show').forEach(modal => {
                        modal.classList.remove('show');
                        playSound('thudSound', 0.2);
                    });
                    
                    // DacƒÉ un input e focusat »ôi nu e √Æn modal, »ôterge-l
                    const activeElement = document.activeElement;
                    if (activeElement && 
                        (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA') &&
                        !activeElement.closest('.modal')) {
                        
                        const wasEmpty = !activeElement.value;
                        activeElement.value = '';
                        
                        if (!wasEmpty) {
                            if (activeElement === filterInput) {
                                filterButtons();
                                toggleClearButton('filterInput', 'filterClearBtn');
                            } else if (activeElement === googleSearchInput) {
                                toggleClearButton('googleSearchInput', 'googleClearBtn');
                            }
                            playSound('thudSound', 0.2);
                        }
                    }
                }
            });
            
            document.addEventListener('keydown', (e) => {
                const activeElement = document.activeElement;
                const isInModal = document.querySelector('.modal.show') !== null;
                const isInInput = activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA';
                
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal.show').forEach(modal => {
                        modal.classList.remove('show');
                        playSound('thudSound', 0.2);
                    });
                    return;
                }
                
                if (!isInModal && !isInInput && e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput && searchInput !== activeElement) {
                        searchInput.focus();
                    }
                }
            });
        });

        function initOfflineDetection() {
            const offlineIndicator = document.getElementById('offlineIndicator');
            
            function updateOnlineStatus() {
                if (!navigator.onLine) {
                    offlineIndicator.classList.add('show');
                    console.log('üì° Offline mode activated');
                } else {
                    offlineIndicator.classList.remove('show');
                    console.log('üåê Back online');
                }
            }
            
            updateOnlineStatus();
            
            window.addEventListener('online', () => {
                updateOnlineStatus();
                showNotification('üåê Back online!', 'success');
            });
            
            window.addEventListener('offline', () => {
                updateOnlineStatus();
                showNotification('üì° Offline mode - Limited functionality', 'info');
            });
        }
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(
                    (registration) => {
                        console.log('‚úÖ Service Worker registered:', registration.scope);
                    },
                    (error) => {
                        console.log('‚ùå Service Worker registration failed:', error);
                    }
                );
            });
        }

        function adjustMobilePlaceholder() {
            const filterInput = document.getElementById('filterInput');
            if (!filterInput) return;
            
            const isMobile = window.innerWidth <= 768 || 
                           ('ontouchstart' in window) || 
                           (navigator.maxTouchPoints > 0);
            
            if (isMobile) {
                filterInput.placeholder = 'üîç CautƒÉ (ex: youtube, email)...';
            }
            
            window.addEventListener('resize', () => {
                const isMobileNow = window.innerWidth <= 768;
                if (isMobileNow) {
                    filterInput.placeholder = 'üîç CautƒÉ (ex: youtube, email)...';
                } else {
                    filterInput.placeholder = 'üîç CautƒÉ site sau categorie (ex: email, filme, youtube)...';
                }
            });
        }

        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        function renderLinks() {
            const grid = document.getElementById('linksGrid');
            grid.innerHTML = '';

            let filtered = currentFilter === 'all' 
                ? links 
                : links.filter(link => link.category === currentFilter);

            filtered = filtered.sort((a, b) => {
                const aUrl = a.url;
                const bUrl = b.url;
                const aFav = favorites.has(aUrl);
                const bFav = favorites.has(bUrl);
                
                if (aFav && !bFav) return -1;
                if (!aFav && bFav) return 1;
                
                const aOrder = customOrder.indexOf(aUrl);
                const bOrder = customOrder.indexOf(bUrl);
                
                if (aOrder !== -1 && bOrder !== -1) {
                    return aOrder - bOrder;
                }
                if (aOrder !== -1) return -1;
                if (bOrder !== -1) return 1;
                
                return 0;
            });

            filtered.forEach((link, index) => {
                const domain = new URL(link.url).hostname;
                const isFavorite = favorites.has(link.url);
                
                const iconUrl = link.iconUrl || `https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
                
                const card = document.createElement('a');
                card.href = link.url;
                card.className = 'link-card';
                card.dataset.name = link.name.toLowerCase();
                card.dataset.category = link.category.toLowerCase();
                card.dataset.url = link.url;
                card.dataset.index = index;
                card.target = '_blank';
                card.draggable = true;
                
                card.addEventListener('click', (e) => {
                    playSound('clickSound', 0.3);
                    trackVisit(link.url);
                });
                
                const stats = visitStats[link.url] || { count: 0, lastVisit: null };
                const lastVisitText = stats.lastVisit 
                    ? new Date(stats.lastVisit).toLocaleDateString('ro-RO', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' })
                    : 'NiciodatƒÉ';
                
                const previewHTML = `
                    <div class="link-card-preview">
                        <div class="preview-url">${link.url}</div>
                        <div class="preview-stats">
                            <div class="preview-stat">
                                <span class="preview-stat-label">Vizite</span>
                                <span class="preview-stat-value">${stats.count}</span>
                            </div>
                            <div class="preview-stat">
                                <span class="preview-stat-label">Ultima vizitƒÉ</span>
                                <span class="preview-stat-value">${lastVisitText}</span>
                            </div>
                        </div>
                    </div>
                `;
                
                card.innerHTML = `
                    ${isFavorite ? '<div class="favorite-star">‚≠ê</div>' : ''}
                    <div class="link-edit-btn" title="EditeazƒÉ" onclick="event.preventDefault(); event.stopPropagation(); openEditModal(${index});">‚úèÔ∏è</div>
                    <img src="${iconUrl}" 
                         alt="${link.name}" 
                         onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåê</text></svg>'">
                    <div class="link-name">${link.name}</div>
                    ${previewHTML}
                `;
                
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragover', handleDragOver);
                card.addEventListener('drop', handleDrop);
                card.addEventListener('dragend', handleDragEnd);
                
                card.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    toggleFavorite(link.url);
                    return false;
                });
                grid.appendChild(card);
            });
        }

        function loadVisitStats() {
            try {
                const saved = localStorage.getItem(VISIT_STATS_KEY);
                visitStats = saved ? JSON.parse(saved) : {};
            } catch (e) {
                visitStats = {};
            }
        }
        
        function saveVisitStats() {
            try {
                localStorage.setItem(VISIT_STATS_KEY, JSON.stringify(visitStats));
            } catch (e) {
                console.error('Error saving visit stats:', e);
            }
        }
        
        function trackVisit(url) {
            if (!visitStats[url]) {
                visitStats[url] = { count: 0, lastVisit: null };
            }
            visitStats[url].count++;
            visitStats[url].lastVisit = Date.now();
            saveVisitStats();
        }

        function loadFavorites() {
            try {
                const saved = localStorage.getItem(FAVORITES_KEY);
                favorites = saved ? new Set(JSON.parse(saved)) : new Set();
            } catch (e) {
                favorites = new Set();
            }
        }
        
        function saveFavorites() {
            try {
                localStorage.setItem(FAVORITES_KEY, JSON.stringify([...favorites]));
            } catch (e) {
                console.error('Error saving favorites:', e);
            }
        }
        
        function toggleFavorite(url) {
            if (favorites.has(url)) {
                favorites.delete(url);
                playSound('thudSound', 0.3);
                showNotification('‚≠ê Removed from favorites', 'info');
            } else {
                favorites.add(url);
                playSound('permanentSound', 0.4);
                showNotification('‚≠ê Added to favorites!', 'success');
            }
            saveFavorites();
            renderLinks();
        }

        function loadCustomOrder() {
            try {
                const saved = localStorage.getItem(CUSTOM_ORDER_KEY);
                customOrder = saved ? JSON.parse(saved) : [];
            } catch (e) {
                customOrder = [];
            }
        }
        
        function saveCustomOrder() {
            try {
                localStorage.setItem(CUSTOM_ORDER_KEY, JSON.stringify(customOrder));
            } catch (e) {
                console.error('Error saving custom order:', e);
            }
        }
        
        function handleDragStart(e) {
            draggedElement = e.target;
            draggedIndex = parseInt(e.target.dataset.index);
            e.target.style.opacity = '0.5';
            e.dataTransfer.effectAllowed = 'move';
            playSound('clickSound', 0.2);
        }
        
        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            
            const targetCard = e.target.closest('.link-card');
            if (targetCard && targetCard !== draggedElement) {
                targetCard.style.transform = 'scale(1.1)';
            }
            return false;
        }
        
        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            
            const targetCard = e.target.closest('.link-card');
            if (targetCard && draggedElement && targetCard !== draggedElement) {
                const draggedUrl = draggedElement.dataset.url;
                const targetUrl = targetCard.dataset.url;
                
                if (!customOrder.includes(draggedUrl)) {
                    customOrder.push(draggedUrl);
                }
                if (!customOrder.includes(targetUrl)) {
                    customOrder.push(targetUrl);
                }
                
                const draggedOrderIndex = customOrder.indexOf(draggedUrl);
                const targetOrderIndex = customOrder.indexOf(targetUrl);
                
                customOrder[draggedOrderIndex] = targetUrl;
                customOrder[targetOrderIndex] = draggedUrl;
                
                saveCustomOrder();
                renderLinks();
                playSound('toggleSound', 0.3);
            }
            
            return false;
        }
        
        function handleDragEnd(e) {
            e.target.style.opacity = '1';
            
            document.querySelectorAll('.link-card').forEach(card => {
                card.style.transform = '';
            });
            
            draggedElement = null;
            draggedIndex = null;
        }

        function fuzzyMatch(str, pattern) {
            if (!pattern) return true;
            
            str = str.toLowerCase();
            pattern = pattern.toLowerCase();
            
            if (str.includes(pattern)) return true;
            
            let patternIdx = 0;
            for (let i = 0; i < str.length && patternIdx < pattern.length; i++) {
                if (str[i] === pattern[patternIdx]) {
                    patternIdx++;
                }
            }
            
            return patternIdx === pattern.length;
        }
        
        function filterButtons() {
            const query = document.getElementById('filterInput').value.toLowerCase().trim();
            const cards = document.querySelectorAll('.link-card');
            
            if (query === '') {
                cards.forEach(card => card.classList.remove('hidden'));
                return;
            }
            
            cards.forEach(card => {
                const name = card.dataset.name;
                const category = card.dataset.category;
                const url = card.dataset.url ? card.dataset.url.toLowerCase() : '';
                
                const matchesName = fuzzyMatch(name, query);
                const matchesCategory = fuzzyMatch(category, query);
                const matchesUrl = url.includes(query);
                
                if (matchesName || matchesCategory || matchesUrl) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        function filterLinks(category) {
            currentFilter = category;
            renderLinks();
        }

        function performGoogleSearch() {
            const query = document.getElementById('googleSearchInput').value.trim();
            if (!query) return;

            addToSearchHistory(query);

            if (query.startsWith('http://') || query.startsWith('https://')) {
                window.open(query, '_blank');
            } else {
                window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, '_blank');
            }
            document.getElementById('googleSearchInput').value = '';
            toggleClearButton('googleSearchInput', 'googleClearBtn');
        }
        
        // ===== CLEAR BUTTONS FUNCTIONALITY =====
        function toggleClearButton(inputId, btnId) {
            const input = document.getElementById(inputId);
            const btn = document.getElementById(btnId);
            
            if (input && btn) {
                if (input.value.trim().length > 0) {
                    btn.classList.add('show');
                } else {
                    btn.classList.remove('show');
                }
            }
        }
        
        function clearGoogleSearch() {
            const input = document.getElementById('googleSearchInput');
            if (input) {
                input.value = '';
                input.focus();
                toggleClearButton('googleSearchInput', 'googleClearBtn');
                playSound('thudSound', 0.2);
                showNotification('üóëÔ∏è CƒÉutare »ôtearsƒÉ', 'info');
            }
        }
        
        function clearFilterInput() {
            const input = document.getElementById('filterInput');
            if (input) {
                input.value = '';
                input.focus();
                filterButtons();
                toggleClearButton('filterInput', 'filterClearBtn');
                playSound('thudSound', 0.2);
                showNotification('üóëÔ∏è Filtru »ôters', 'info');
            }
        }

        function updateClock() {
            const now = new Date();
            
            const time = now.toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            document.getElementById('mainTime').textContent = time;
            
            const fullDateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('fullDateMain').textContent = now.toLocaleDateString('ro-RO', fullDateOptions);
            
            const daysRo = ['DuminicƒÉ', 'Luni', 'Mar»õi', 'Miercuri', 'Joi', 'Vineri', 'S√¢mbƒÉtƒÉ'];
            document.getElementById('dayNameMain').textContent = daysRo[now.getDay()];
            
            function getWeekNumber(d) {
                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
                d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
                const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
                const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
                return weekNo;
            }
            const weekNumber = getWeekNumber(now);
            document.getElementById('weekNumMain').textContent = `SƒÇPTƒÇM√ÇNƒÇ ${weekNumber}`;
            
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            document.getElementById('dayOfYearMain').textContent = `Ziua ${dayOfYear}`;
            
            document.getElementById('yearMain').textContent = now.getFullYear();
            
            if (document.getElementById('clockModal').classList.contains('show')) {
                updateClockModal(now);
            }
        }

        function updateClockModal(date = new Date()) {
            document.getElementById('modalClockTime').textContent = date.toLocaleTimeString('ro-RO');
            
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('fullDate').textContent = date.toLocaleDateString('ro-RO', options);
            
            const daysRo = ['DuminicƒÉ', 'Luni', 'Mar»õi', 'Miercuri', 'Joi', 'Vineri', 'S√¢mbƒÉtƒÉ'];
            document.getElementById('dayOfWeek').textContent = daysRo[date.getDay()];
            
            const start = new Date(date.getFullYear(), 0, 0);
            const diff = date - start;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            document.getElementById('dayOfYear').textContent = dayOfYear;
            
            function getWeekNumber(d) {
                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
                d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
                const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
                const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
                return weekNo;
            }
            
            const weekNumber = getWeekNumber(date);
            document.getElementById('weekNumber').textContent = `SƒÉptƒÉm√¢na ${weekNumber}`;
            
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            document.getElementById('timezone').textContent = timezone;
            
            const offset = -date.getTimezoneOffset();
            const hours = Math.floor(Math.abs(offset) / 60);
            const minutes = Math.abs(offset) % 60;
            const sign = offset >= 0 ? '+' : '-';
            document.getElementById('utcOffset').textContent = `UTC${sign}${hours}:${minutes.toString().padStart(2, '0')}`;
        }

        function toggleClockModal() {
            const modal = document.getElementById('clockModal');
            if (modal.classList.contains('show')) {
                closeClockModal();
            } else {
                playSound('bleepSound', 0.3);
                modal.classList.add('show');
                updateClockModal();
            }
        }

        function closeClockModal() {
            playSound('thudSound', 0.2);
            document.getElementById('clockModal').classList.remove('show');
        }

        // ===== WEATHER SYSTEM WITH PRECISE SUNRISE/SUNSET =====
        let weatherData = null;

        const WEATHER_LOC_CACHE_KEY = "weatherLocCache_v2";
        const WEATHER_DATA_CACHE_KEY = "weatherDataCache_v2";

        function _safeJSONParse(s) {
            try { return JSON.parse(s); } catch { return null; }
        }

        function _nowIso() {
            return new Date().toISOString();
        }

        function _fmtTimeShort(d = new Date()) {
            return d.toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' });
        }

        function _degToCompass(deg) {
            if (typeof deg !== "number" || Number.isNaN(deg)) return "";
            const dirs = ["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];
            return dirs[Math.round(deg / 22.5) % 16];
        }

        function _weatherCodeToRo(code) {
            const m = {
                0: "Senin",
                1: "Mai mult senin",
                2: "Par»õial noros",
                3: "√énnorat",
                45: "Cea»õƒÉ",
                48: "Cea»õƒÉ cu depuneri",
                51: "Burni»õƒÉ slabƒÉ",
                53: "Burni»õƒÉ",
                55: "Burni»õƒÉ puternicƒÉ",
                56: "Burni»õƒÉ √Ænghe»õatƒÉ slabƒÉ",
                57: "Burni»õƒÉ √Ænghe»õatƒÉ",
                61: "Ploaie slabƒÉ",
                63: "Ploaie",
                65: "Ploaie puternicƒÉ",
                66: "Ploaie √Ænghe»õatƒÉ slabƒÉ",
                67: "Ploaie √Ænghe»õatƒÉ",
                71: "Ninsoare slabƒÉ",
                73: "Ninsoare",
                75: "Ninsoare puternicƒÉ",
                77: "MƒÉzƒÉriche",
                80: "Averse slabe",
                81: "Averse",
                82: "Averse puternice",
                85: "Averse de ninsoare slabe",
                86: "Averse de ninsoare",
                95: "FurtunƒÉ",
                96: "FurtunƒÉ cu grindinƒÉ",
                99: "FurtunƒÉ cu grindinƒÉ puternicƒÉ"
            };
            return m[code] || "Vreme variabilƒÉ";
        }

        async function getBestLocation(force = false) {
            try {
                const cached = _safeJSONParse(localStorage.getItem(WEATHER_LOC_CACHE_KEY) || "");
                if (!force && cached && cached.lat && cached.lon && cached.ts) {
                    const ageMs = Date.now() - new Date(cached.ts).getTime();
                    if (ageMs >= 0 && ageMs < 6 * 60 * 60 * 1000) return cached;
                }
            } catch {}

            try {
                if (navigator.geolocation) {
                    const pos = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 8000,
                            maximumAge: 5 * 60 * 1000
                        });
                    });
                    const loc = {
                        lat: Number(pos.coords.latitude),
                        lon: Number(pos.coords.longitude),
                        label: "Loca»õia ta (GPS)",
                        source: "gps",
                        ts: _nowIso()
                    };
                    localStorage.setItem(WEATHER_LOC_CACHE_KEY, JSON.stringify(loc));
                    return loc;
                }
            } catch (e) {
                console.warn("Geolocation not available/denied:", e);
            }

            try {
                const r = await fetch("https://ipapi.co/json/", { cache: "no-store" });
                if (r.ok) {
                    const j = await r.json();
                    const loc = {
                        lat: Number(j.latitude),
                        lon: Number(j.longitude),
                        label: [j.city, j.region, j.country_name].filter(Boolean).join(", "),
                        source: "ip",
                        ts: _nowIso()
                    };
                    if (loc.lat && loc.lon) {
                        localStorage.setItem(WEATHER_LOC_CACHE_KEY, JSON.stringify(loc));
                        return loc;
                    }
                }
            } catch (e) {
                console.warn("IP location failed:", e);
            }

            return { lat: 52.7073, lon: -2.7547, label: "Shropshire, UK", source: "fallback", ts: _nowIso() };
        }

        async function fetchWttr(lat, lon, signal) {
            const url = `https://wttr.in/${lat},${lon}?format=j1`;
            const res = await fetch(url, { signal, headers: { "Accept": "application/json" } });
            if (!res.ok) throw new Error(`wttr HTTP ${res.status}`);
            return await res.json();
        }

        // ‚úÖ FIX 5 - CONVERT 12H TO 24H
        function convert12to24(time12h) {
            if (!time12h || time12h === "--:--") return "--:--";
            
            const match = time12h.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);
            if (!match) return time12h;
            
            let [, hours, minutes, period] = match;
            hours = parseInt(hours);
            
            if (period.toUpperCase() === 'PM' && hours !== 12) {
                hours += 12;
            } else if (period.toUpperCase() === 'AM' && hours === 12) {
                hours = 0;
            }
            
            return `${hours.toString().padStart(2, '0')}:${minutes}`;
        }

        function normalizeFromWttr(data) {
            const current = data?.current_condition?.[0];
            const astronomy = data?.weather?.[0]?.astronomy?.[0];
            const area = data?.nearest_area?.[0];
            const locParts = [
                area?.areaName?.[0]?.value,
                area?.region?.[0]?.value,
                area?.country?.[0]?.value
            ].filter(Boolean);
            const location = locParts.join(", ");

            return {
                source: "wttr.in",
                location: location || "Loca»õia ta",
                tempC: Number(current?.temp_C ?? NaN),
                feelsLikeC: Number(current?.FeelsLikeC ?? NaN),
                humidity: Number(current?.humidity ?? NaN),
                windKmh: Number(current?.windspeedKmph ?? NaN),
                windDir: (current?.winddir16Point || "").trim(),
                pressureHpa: Number(current?.pressure ?? NaN),
                visibilityKm: Number(current?.visibility ?? NaN),
                cloudcover: Number(current?.cloudcover ?? NaN),
                description: (current?.weatherDesc?.[0]?.value || "").trim() || "Vreme variabilƒÉ",
                sunrise: convert12to24(astronomy?.sunrise || "--:--"),
                sunset: convert12to24(astronomy?.sunset || "--:--"),
                updatedAtIso: _nowIso()
            };
        }

        // ‚úÖ FIX 6 - PRECISE SUNRISE/SUNSET API
        async function fetchPreciseSunTimes(lat, lon) {
            try {
                const url = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lon}&formatted=0&date=today`;
                const res = await fetch(url, { 
                    signal: AbortSignal.timeout(5000),
                    cache: 'default' 
                });
                
                if (!res.ok) throw new Error('Sunrise API failed');
                
                const data = await res.json();
                
                if (data.status === 'OK') {
                    const sunriseUTC = new Date(data.results.sunrise);
                    const sunsetUTC = new Date(data.results.sunset);
                    
                    return {
                        sunrise: sunriseUTC.toLocaleTimeString('ro-RO', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: false 
                        }),
                        sunset: sunsetUTC.toLocaleTimeString('ro-RO', { 
                            hour: '2-digit', 
                            minute: '2-digit',
                            hour12: false 
                        })
                    };
                }
            } catch (e) {
                console.warn('Precise sun times API failed:', e);
            }
            return null;
        }

        async function fetchOpenMeteo(lat, lon, signal) {
            const url =
                `https://api.open-meteo.com/v1/forecast?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}` +
                `&current=temperature_2m,relative_humidity_2m,apparent_temperature,pressure_msl,cloud_cover,wind_speed_10m,wind_direction_10m,weather_code` +
                `&daily=sunrise,sunset&timezone=auto`;
            const res = await fetch(url, { signal, headers: { "Accept": "application/json" } });
            if (!res.ok) throw new Error(`open-meteo HTTP ${res.status}`);
            return await res.json();
        }

        function normalizeFromOpenMeteo(data, fallbackLabel = "") {
            const c = data?.current || {};
            const sunriseIso = data?.daily?.sunrise?.[0];
            const sunsetIso = data?.daily?.sunset?.[0];

            const sunrise = sunriseIso ? new Date(sunriseIso).toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' }) : "--:--";
            const sunset = sunsetIso ? new Date(sunsetIso).toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' }) : "--:--";

            const code = Number(c.weather_code ?? NaN);
            const desc = _weatherCodeToRo(code);

            const windDir = _degToCompass(Number(c.wind_direction_10m ?? NaN));

            return {
                source: "open-meteo.com",
                location: (fallbackLabel || "Loca»õia ta").trim(),
                tempC: Number(c.temperature_2m ?? NaN),
                feelsLikeC: Number(c.apparent_temperature ?? NaN),
                humidity: Number(c.relative_humidity_2m ?? NaN),
                windKmh: Number(c.wind_speed_10m ?? NaN),
                windDir,
                pressureHpa: Number(c.pressure_msl ?? NaN),
                visibilityKm: NaN,
                cloudcover: Number(c.cloud_cover ?? NaN),
                description: desc,
                sunrise,
                sunset,
                updatedAtIso: _nowIso()
            };
        }

        function applyWeatherToUI(w) {
            if (!w) return;
            weatherData = w;

            const main = (Number.isFinite(w.tempC) ? `${Math.round(w.tempC)}¬∞C` : "--¬∞C") + " - " + (w.description || "Vreme");
            const weatherEl = document.getElementById("weather");
            if (weatherEl) weatherEl.textContent = main;

            const locMini = document.getElementById("weatherLocationMini");
            if (locMini) locMini.textContent = w.location || "--";

            updateWeatherModal(w);

            try {
                localStorage.setItem(WEATHER_DATA_CACHE_KEY, JSON.stringify({ ...w, ts: _nowIso() }));
            } catch {}
        }

        async function loadWeather(force = false) {
            const weatherEl = document.getElementById("weather");
            const locMini = document.getElementById("weatherLocationMini");

            if (weatherEl) weatherEl.textContent = "Se √ÆncarcƒÉ...";
            if (locMini) locMini.textContent = "Localizare...";

            if (!navigator.onLine) {
                const cached = _safeJSONParse(localStorage.getItem(WEATHER_DATA_CACHE_KEY) || "");
                if (cached) {
                    cached.source = (cached.source || "cache") + " (offline)";
                    applyWeatherToUI(cached);
                    return;
                }
            }

            const loc = await getBestLocation(force);

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 12000);

            try {
                const wttr = await fetchWttr(loc.lat, loc.lon, controller.signal);
                const normalized = normalizeFromWttr(wttr);

                // ‚úÖ FIX 6 - OVERRIDE WITH PRECISE TIMES
                const preciseSun = await fetchPreciseSunTimes(loc.lat, loc.lon);
                if (preciseSun) {
                    normalized.sunrise = preciseSun.sunrise;
                    normalized.sunset = preciseSun.sunset;
                    console.log('‚úÖ Using precise astronomical times:', preciseSun);
                }

                if (normalized.location && normalized.location !== "Loca»õia ta") {
                    try {
                        const cachedLoc = { ...loc, label: normalized.location, ts: _nowIso() };
                        localStorage.setItem(WEATHER_LOC_CACHE_KEY, JSON.stringify(cachedLoc));
                    } catch {}
                }

                applyWeatherToUI(normalized);
            } catch (error) {
                console.warn("Weather (wttr) failed, trying open-meteo:", error);

                try {
                    const om = await fetchOpenMeteo(loc.lat, loc.lon, controller.signal);
                    const normalized = normalizeFromOpenMeteo(om, loc.label || "");
                    
                    // ‚úÖ FIX 6 - OVERRIDE WITH PRECISE TIMES
                    const preciseSun = await fetchPreciseSunTimes(loc.lat, loc.lon);
                    if (preciseSun) {
                        normalized.sunrise = preciseSun.sunrise;
                        normalized.sunset = preciseSun.sunset;
                        console.log('‚úÖ Using precise astronomical times:', preciseSun);
                    }
                    
                    applyWeatherToUI(normalized);
                } catch (error2) {
                    console.error("Weather (open-meteo) failed:", error2);

                    const cached = _safeJSONParse(localStorage.getItem(WEATHER_DATA_CACHE_KEY) || "");
                    if (cached) {
                        cached.source = (cached.source || "cache") + " (cache)";
                        applyWeatherToUI(cached);
                    } else {
                        useDemoWeatherData();
                    }
                }
            } finally {
                clearTimeout(timeoutId);
            }
        }

        function useDemoWeatherData() {
            console.log('Using demo weather data');
            const demo = {
                source: "demo",
                location: "Demo",
                tempC: 3,
                feelsLikeC: -1,
                humidity: 82,
                windKmh: 13,
                windDir: "NE",
                pressureHpa: 1033,
                visibilityKm: 10,
                cloudcover: 25,
                description: "Senin",
                sunrise: "08:21",
                sunset: "15:59",
                updatedAtIso: _nowIso()
            };
            applyWeatherToUI(demo);
        }

        function updateWeatherModal(w) {
            if (!w) return;

            try {
                document.getElementById('modalMainTemp').textContent = Number.isFinite(w.tempC) ? `${Math.round(w.tempC)}¬∞C` : '--¬∞C';
                document.getElementById('modalLocation').textContent = w.location || 'Loca»õie necunoscutƒÉ';
                document.getElementById('modalDescription').textContent = w.description || '--';

                const updated = w.updatedAtIso ? new Date(w.updatedAtIso) : new Date();
                const updLine = `Actualizat: ${_fmtTimeShort(updated)} ‚Ä¢ SursƒÉ: ${w.source || "‚Äî"}`;
                const updEl = document.getElementById('modalUpdated');
                if (updEl) updEl.textContent = updLine;

                document.getElementById('feelsLike').textContent = Number.isFinite(w.feelsLikeC) ? `${Math.round(w.feelsLikeC)}¬∞C` : '--¬∞C';
                document.getElementById('humidity').textContent = Number.isFinite(w.humidity) ? `${Math.round(w.humidity)}%` : '--%';

                const windParts = [];
                if (Number.isFinite(w.windKmh)) windParts.push(`${Math.round(w.windKmh)} km/h`);
                if (w.windDir) windParts.push(w.windDir);
                document.getElementById('wind').textContent = windParts.length ? windParts.join(" ") : '-- km/h';

                document.getElementById('pressure').textContent = Number.isFinite(w.pressureHpa) ? `${Math.round(w.pressureHpa)} hPa` : '-- hPa';
                document.getElementById('visibility').textContent = Number.isFinite(w.visibilityKm) ? `${Math.round(w.visibilityKm)} km` : '-- km';
                document.getElementById('sunrise').textContent = w.sunrise || '--:--';
                document.getElementById('sunset').textContent = w.sunset || '--:--';
                document.getElementById('cloudcover').textContent = Number.isFinite(w.cloudcover) ? `${Math.round(w.cloudcover)}%` : '--%';
            } catch (error) {
                console.error('Error updating weather modal:', error);
            }
        }

        function toggleWeatherModal() {
            const modal = document.getElementById('weatherModal');
            if (modal.classList.contains('show')) {
                closeWeatherModal();
            } else {
                playSound('bleepSound', 0.3);
                modal.classList.add('show');
                if (weatherData) {
                    updateWeatherModal(weatherData);
                } else {
                    document.getElementById('modalMainTemp').textContent = 'Loading...';
                    document.getElementById('modalDescription').textContent = 'Fetching weather data...';
                    const updEl = document.getElementById('modalUpdated');
                    if (updEl) updEl.textContent = '';
                    loadWeather(false);
                }
            }
        }

        function closeWeatherModal() {
            playSound('thudSound', 0.2);
            document.getElementById('weatherModal').classList.remove('show');
        }

        function openAddModal() {
            playSound('bleepSound', 0.3);
            document.getElementById('addModal').classList.add('show');
        }

        function closeAddModal() {
            playSound('thudSound', 0.2);
            document.getElementById('addModal').classList.remove('show');
            document.getElementById('siteName').value = '';
            document.getElementById('siteUrl').value = '';
            document.getElementById('siteCategory').value = '';
        }

        function addSite() {
            const name = document.getElementById('siteName').value.trim();
            const url = document.getElementById('siteUrl').value.trim();
            const category = document.getElementById('siteCategory').value;

            if (!name || !url || !category) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ toate c√¢mpurile!');
                return;
            }

            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                alert('üîó URL-ul trebuie sƒÉ √ÆnceapƒÉ cu http:// sau https://');
                return;
            }

            playSound('permanentSound', 0.4);
            links.push({ 
                name, 
                url, 
                category,
                iconUrl: null,
                tags: null,
                notes: null
            });
            saveAllLinks();
            renderLinks();
            closeAddModal();
            showNotification('‚úÖ Site adƒÉugat cu succes!');
        }

        let currentEditIndex = null;

        function openEditModal(index) {
            currentEditIndex = index;
            const link = links[index];
            
            if (!link) {
                alert('Eroare: Site-ul nu a fost gƒÉsit!');
                return;
            }
            
            document.getElementById('editSiteName').value = link.name || '';
            document.getElementById('editSiteUrl').value = link.url || '';
            document.getElementById('editIconUrl').value = link.iconUrl || '';
            document.getElementById('editSiteCategory').value = link.category || '';
            document.getElementById('editSiteTags').value = link.tags || '';
            document.getElementById('editSiteNotes').value = link.notes || '';
            
            playSound('bleepSound', 0.3);
            document.getElementById('editModal').classList.add('show');
        }

        function closeEditModal() {
            playSound('thudSound', 0.2);
            document.getElementById('editModal').classList.remove('show');
            currentEditIndex = null;
            document.getElementById('editSiteName').value = '';
            document.getElementById('editSiteUrl').value = '';
            document.getElementById('editIconUrl').value = '';
            document.getElementById('editSiteCategory').value = '';
            document.getElementById('editSiteTags').value = '';
            document.getElementById('editSiteNotes').value = '';
        }

        function saveEditSite() {
            if (currentEditIndex === null) {
                alert('Eroare: Nu s-a gƒÉsit site-ul de editat!');
                return;
            }

            const newName = document.getElementById('editSiteName').value.trim();
            const newUrl = document.getElementById('editSiteUrl').value.trim();
            const newIconUrl = document.getElementById('editIconUrl').value.trim();
            const newCategory = document.getElementById('editSiteCategory').value;
            const newTags = document.getElementById('editSiteTags').value.trim();
            const newNotes = document.getElementById('editSiteNotes').value.trim();

            if (!newName || !newUrl || !newCategory) {
                alert('Te rog completeazƒÉ c√¢mpurile obligatorii (Nume, URL, Categorie)!');
                return;
            }

            if (!newUrl.startsWith('http://') && !newUrl.startsWith('https://')) {
                alert('URL-ul trebuie sƒÉ √ÆnceapƒÉ cu http:// sau https://');
                return;
            }

            const oldUrl = links[currentEditIndex].url;
            
            links[currentEditIndex] = { 
                name: newName, 
                url: newUrl, 
                iconUrl: newIconUrl || null,
                category: newCategory,
                tags: newTags || null,
                notes: newNotes || null
            };

            if (oldUrl !== newUrl && favorites.has(oldUrl)) {
                favorites.delete(oldUrl);
                favorites.add(newUrl);
                saveFavorites();
            }

            if (oldUrl !== newUrl) {
                const orderIndex = customOrder.indexOf(oldUrl);
                if (orderIndex !== -1) {
                    customOrder[orderIndex] = newUrl;
                    saveCustomOrder();
                }
            }

            if (oldUrl !== newUrl && visitStats[oldUrl]) {
                visitStats[newUrl] = visitStats[oldUrl];
                delete visitStats[oldUrl];
                saveVisitStats();
            }

            playSound('permanentSound', 0.4);
            saveAllLinks();
            renderLinks();
            closeEditModal();
            showNotification('‚úÖ Site actualizat cu succes!', 'success');
        }

        function deleteSite() {
            if (currentEditIndex === null) {
                alert('‚ùå Eroare: Nu s-a gƒÉsit site-ul de »ôters!');
                return;
            }

            if (currentEditIndex < ORIGINAL_COUNT) {
                alert('üîí Nu po»õi »ôterge site-urile predefinite! Po»õi doar sƒÉ le editezi.');
                return;
            }

            if (!confirm('‚ö†Ô∏è Sigur vrei sƒÉ »ôtergi acest site?\n\nüóëÔ∏è AceastƒÉ ac»õiune nu poate fi anulatƒÉ!')) {
                return;
            }

            const url = links[currentEditIndex].url;

            links.splice(currentEditIndex, 1);

            if (favorites.has(url)) {
                favorites.delete(url);
                saveFavorites();
            }

            const orderIndex = customOrder.indexOf(url);
            if (orderIndex !== -1) {
                customOrder.splice(orderIndex, 1);
                saveCustomOrder();
            }

            if (visitStats[url]) {
                delete visitStats[url];
                saveVisitStats();
            }

            playSound('thudSound', 0.3);
            saveAllLinks();
            renderLinks();
            closeEditModal();
            showNotification('üóëÔ∏è Site »ôters cu succes!', 'info');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
                z-index: 10000;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        const ALL_LINKS_KEY = "allLinks_v3";
        const ORIGINAL_COUNT = 67;

        function saveAllLinks() {
            try {
                localStorage.setItem(ALL_LINKS_KEY, JSON.stringify(links));
                console.log('‚úÖ Saved', links.length, 'links to localStorage');
            } catch (e) {
                console.error('Error saving all links:', e);
                alert('Eroare la salvare! VerificƒÉ spa»õiul disponibil √Æn browser.');
            }
        }

        function loadAllLinks() {
            try {
                const saved = localStorage.getItem(ALL_LINKS_KEY);
                if (saved) {
                    const loadedLinks = JSON.parse(saved);
                    if (Array.isArray(loadedLinks) && loadedLinks.length > 0) {
                        links = loadedLinks;
                        console.log('‚úÖ Loaded', links.length, 'links from localStorage');
                        return true;
                    }
                }
                console.log('üì¶ No saved links found, using defaults');
                return false;
            } catch (e) {
                console.error('Error loading all links:', e);
                return false;
            }
        }

        function loadCustomLinks() {
            const CUSTOM_KEY = "customLinks_v2";
            try {
                const raw = localStorage.getItem(CUSTOM_KEY);
                if (!raw) return;
                const arr = JSON.parse(raw);
                if (!Array.isArray(arr)) return;
                
                arr.forEach(item => {
                    if (item && item.name && item.url && item.category) {
                        const exists = links.some(l => l.url === item.url);
                        if (!exists) {
                            links.push(item);
                            console.log('Migrated custom link:', item.name);
                        }
                    }
                });
                
                if (arr.length > 0) {
                    saveAllLinks();
                    localStorage.removeItem(CUSTOM_KEY);
                    console.log('‚úÖ Migrated', arr.length, 'custom links');
                }
            } catch (e) {
                console.error('Error migrating custom links:', e);
            }
        }

        function saveCustomLinks() {
            saveAllLinks();
        }

        function exportLinks() {
            try {
                const exportData = {
                    version: "2.0",
                    exportDate: new Date().toISOString(),
                    links: links,
                    favorites: [...favorites],
                    customOrder: customOrder,
                    visitStats: visitStats,
                    searchHistory: getSearchHistory(),
                    categories: CATEGORIES.map(c => c.key),
                    notes: getNotes(),
                    passwordHistory: JSON.parse(localStorage.getItem(PASSWORD_HISTORY_KEY) || '[]'),
                    theme: localStorage.getItem(THEME_KEY) || 'purple',
                    soundEnabled: localStorage.getItem(SOUND_ENABLED_KEY) === 'true',
                    zoomLevel: parseInt(localStorage.getItem(ZOOM_KEY) || '100')
                };
                
                const jsonString = JSON.stringify(exportData, null, 2);
                const blob = new Blob([jsonString], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
                a.download = `hercules-links-backup-${timestamp}.json`;
                
                document.body.appendChild(a);
                a.click();
                
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                playSound('permanentSound', 0.4);
                showNotification(`üì• Export complet! ${links.length} link-uri salvate`, 'success');
                
                console.log('‚úÖ Exported', links.length, 'links');
            } catch (e) {
                console.error('Export error:', e);
                alert('‚ùå Eroare la export! VerificƒÉ consola pentru detalii.');
            }
        }

        function importLinks(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.name.endsWith('.json')) {
                alert('‚ö†Ô∏è Te rog selecteazƒÉ un fi»ôier JSON valid!');
                event.target.value = '';
                return;
            }

            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const importData = JSON.parse(e.target.result);
                    
                    if (!importData || !importData.links || !Array.isArray(importData.links)) {
                        throw new Error('Format JSON invalid! Lipsesc link-urile.');
                    }

                    const confirmMsg = `üì§ Import Backup Complet\n\n` +
                        `Fi»ôier: ${file.name}\n` +
                        `Versiune: ${importData.version || '1.0'}\n` +
                        `Data export: ${importData.exportDate ? new Date(importData.exportDate).toLocaleString('ro-RO') : 'NecunoscutƒÉ'}\n\n` +
                        `üìä CON»öINUT:\n` +
                        `‚Ä¢ Link-uri: ${importData.links.length}\n` +
                        `‚Ä¢ Favorite: ${importData.favorites ? importData.favorites.length : 0}\n` +
                        `‚Ä¢ CƒÉutƒÉri: ${importData.searchHistory ? importData.searchHistory.length : 0}\n` +
                        `‚Ä¢ Notes: ${importData.notes ? importData.notes.length : 0}\n` +
                        `‚Ä¢ Parole: ${importData.passwordHistory ? importData.passwordHistory.length : 0}\n` +
                        `‚Ä¢ TemƒÉ: ${importData.theme || 'N/A'}\n` +
                        `‚Ä¢ Sunete: ${importData.soundEnabled !== undefined ? (importData.soundEnabled ? 'ON' : 'OFF') : 'N/A'}\n` +
                        `‚Ä¢ Zoom: ${importData.zoomLevel || '100'}%\n\n` +
                        `‚ö†Ô∏è ATEN»öIE: Toate datele curente vor fi √éNLOCUITE!\n\n` +
                        `Continui cu importul?`;

                    if (!confirm(confirmMsg)) {
                        event.target.value = '';
                        return;
                    }

                    links = importData.links;
                    saveAllLinks();

                    if (importData.favorites && Array.isArray(importData.favorites)) {
                        favorites = new Set(importData.favorites);
                        saveFavorites();
                    }

                    if (importData.customOrder && Array.isArray(importData.customOrder)) {
                        customOrder = importData.customOrder;
                        saveCustomOrder();
                    }

                    if (importData.visitStats && typeof importData.visitStats === 'object') {
                        visitStats = importData.visitStats;
                        saveVisitStats();
                    }

                    if (importData.searchHistory && Array.isArray(importData.searchHistory)) {
                        saveSearchHistory(importData.searchHistory);
                        renderSearchHistory();
                    }

                    if (importData.notes && Array.isArray(importData.notes)) {
                        localStorage.setItem(NOTES_KEY, JSON.stringify(importData.notes));
                        console.log('‚úÖ Imported', importData.notes.length, 'notes');
                    }

                    if (importData.passwordHistory && Array.isArray(importData.passwordHistory)) {
                        localStorage.setItem(PASSWORD_HISTORY_KEY, JSON.stringify(importData.passwordHistory));
                        console.log('‚úÖ Imported', importData.passwordHistory.length, 'passwords');
                    }

                    if (importData.theme && THEMES.includes(importData.theme)) {
                        localStorage.setItem(THEME_KEY, importData.theme);
                        applyTheme(importData.theme);
                        console.log('‚úÖ Imported theme:', importData.theme);
                    }

                    if (typeof importData.soundEnabled === 'boolean') {
                        soundEnabled = importData.soundEnabled;
                        localStorage.setItem(SOUND_ENABLED_KEY, soundEnabled.toString());
                        updateSoundButton();
                        console.log('‚úÖ Imported sound setting:', soundEnabled);
                    }

                    if (importData.zoomLevel && ZOOM_LEVELS.includes(importData.zoomLevel)) {
                        const index = ZOOM_LEVELS.indexOf(importData.zoomLevel);
                        currentZoomIndex = index;
                        applyZoom(importData.zoomLevel);
                        console.log('‚úÖ Imported zoom level:', importData.zoomLevel);
                    }

                    renderLinks();

                    playSound('permanentSound', 0.5);
                    showNotification(`‚úÖ Import complet! ${links.length} link-uri restaurate`, 'success');
                    
                    console.log('‚úÖ Imported', links.length, 'links from', file.name);

                    setTimeout(() => {
                        showVerificationDashboard();
                    }, 1000);

                } catch (error) {
                    console.error('Import error:', error);
                    alert(`‚ùå Eroare la import!\n\n${error.message}\n\nVerificƒÉ cƒÉ fi»ôierul JSON este valid.`);
                } finally {
                    event.target.value = '';
                }
            };

            reader.onerror = function() {
                alert('‚ùå Eroare la citirea fi»ôierului!');
                event.target.value = '';
            };

            reader.readAsText(file);
        }

        function showVerificationDashboard() {
            playSound('bleepSound', 0.3);
            
            const data = {
                links: JSON.parse(localStorage.getItem('allLinks_v3') || '[]'),
                favorites: JSON.parse(localStorage.getItem('favoriteLinks_v1') || '[]'),
                customOrder: JSON.parse(localStorage.getItem('customOrder_v1') || '[]'),
                visitStats: JSON.parse(localStorage.getItem('visitStats_v1') || '{}'),
                searchHistory: JSON.parse(localStorage.getItem('searchHistory_v1') || '[]'),
                notes: JSON.parse(localStorage.getItem('notes_v1') || '[]'),
                passwords: JSON.parse(localStorage.getItem('passwordHistory_v1') || '[]'),
                theme: localStorage.getItem('selectedTheme_v1') || 'purple',
                soundEnabled: localStorage.getItem('soundEnabled_v1') === 'true',
                zoomLevel: parseInt(localStorage.getItem('zoomLevel_v1') || '100')
            };
            
            const themeNames = {
                purple: 'üíú Purple Dream',
                neon: 'üíö Neon Night',
                sunset: 'üåÖ Sunset Vibes',
                ocean: 'üåä Ocean Breeze',
                light: '‚òÄÔ∏è Light Mode'
            };
            
            const dashboard = document.createElement('div');
            dashboard.id = 'verificationDashboard';
            dashboard.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, rgba(102, 126, 234, 0.98) 0%, rgba(118, 75, 162, 0.98) 100%);
                border: 3px solid rgba(255, 255, 255, 0.6);
                border-radius: 25px;
                padding: 35px;
                z-index: 10000;
                color: white;
                font-family: 'Segoe UI', sans-serif;
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
                max-width: 600px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                backdrop-filter: blur(20px);
                animation: fadeIn 0.3s ease;
            `;
            
            dashboard.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="margin: 0; font-size: 2.2em; font-weight: 900; text-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);">
                        üîç Verificare Date Complete
                    </h2>
                    <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 0.95em;">
                        Backup complet al tuturor datelor tale
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(37, 99, 235, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(59, 130, 246, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">üìä</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${data.links.length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">Links</div>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(245, 158, 11, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(251, 191, 36, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">‚≠ê</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${data.favorites.length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">Favorite</div>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(5, 150, 105, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(16, 185, 129, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">üîç</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${data.searchHistory.length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">CƒÉutƒÉri</div>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.3), rgba(219, 39, 119, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(236, 72, 153, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">üìù</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${data.notes.length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">Notes</div>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(147, 51, 234, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(168, 85, 247, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">üîê</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${data.passwords.length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">Parole</div>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.3)); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid rgba(255, 255, 255, 0.3); transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(239, 68, 68, 0.5)';" onmouseout="this.style.transform=''; this.style.boxShadow='';">
                        <div style="font-size: 3em; margin-bottom: 8px;">üìà</div>
                        <div style="font-size: 2.5em; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">${Object.keys(data.visitStats).length}</div>
                        <div style="font-size: 0.85em; opacity: 0.95; font-weight: 600;">Vizite</div>
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; margin-bottom: 20px; border: 2px solid rgba(255, 255, 255, 0.3);">
                    <h3 style="margin: 0 0 15px 0; font-size: 1.3em; font-weight: 700; display: flex; align-items: center; gap: 10px;">
                        üìÅ Detalii Organizare
                    </h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
                            <span style="opacity: 0.9;">üìÇ Ordine custom</span>
                            <span style="font-weight: 700; font-size: 1.2em;">${data.customOrder.length}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
                            <span style="opacity: 0.9;">üé® TemƒÉ</span>
                            <span style="font-weight: 700; font-size: 1em;">${themeNames[data.theme] || data.theme}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
                            <span style="opacity: 0.9;">üîä Sunete</span>
                            <span style="font-weight: 700; font-size: 1.2em;">${data.soundEnabled ? '‚úÖ ON' : 'üîá OFF'}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
                            <span style="opacity: 0.9;">üîç Zoom</span>
                            <span style="font-weight: 700; font-size: 1.2em;">${data.zoomLevel}%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 8px; grid-column: 1 / -1;">
                            <span style="opacity: 0.9;">üíæ Total date</span>
                            <span style="font-weight: 700; font-size: 1.2em;">${data.links.length + data.notes.length + data.passwords.length}</span>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 12px; justify-content: center;">
                    <button onclick="closeVerificationDashboard()" style="
                        background: linear-gradient(135deg, #10b981, #059669);
                        border: none;
                        color: white;
                        padding: 15px 35px;
                        border-radius: 12px;
                        font-size: 1.1em;
                        font-weight: 700;
                        cursor: pointer;
                        box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(16, 185, 129, 0.6)';" onmouseout="this.style.transform=''; this.style.boxShadow='0 5px 20px rgba(16, 185, 129, 0.4)';">
                        ‚úÖ Perfect!
                    </button>
                    <button onclick="exportLinks(); closeVerificationDashboard();" style="
                        background: linear-gradient(135deg, #3b82f6, #2563eb);
                        border: none;
                        color: white;
                        padding: 15px 35px;
                        border-radius: 12px;
                        font-size: 1.1em;
                        font-weight: 700;
                        cursor: pointer;
                        box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(59, 130, 246, 0.6)';" onmouseout="this.style.transform=''; this.style.boxShadow='0 5px 20px rgba(59, 130, 246, 0.4)';">
                        üì• Export Acum
                    </button>
                </div>
            `;
            
            document.body.appendChild(dashboard);
        }

        function closeVerificationDashboard() {
            playSound('thudSound', 0.2);
            const dashboard = document.getElementById('verificationDashboard');
            if (dashboard) {
                dashboard.remove();
            }
        }

        // ===== PASSWORD GENERATOR =====
        const PASSWORD_HISTORY_KEY = 'passwordHistory_v1';
        let currentPassword = '';
        
        function openPasswordGenerator() {
            playSound('bleepSound', 0.3);
            document.getElementById('passwordModal').classList.add('show');
            loadPasswordHistory();
        }
        
        function closePasswordGenerator() {
            playSound('thudSound', 0.2);
            document.getElementById('passwordModal').classList.remove('show');
        }
        
        function generatePassword() {
            playSound('toggleSound', 0.3);
            
            const length = parseInt(document.getElementById('passwordLength').value);
            const includeUppercase = document.getElementById('includeUppercase').checked;
            const includeLowercase = document.getElementById('includeLowercase').checked;
            const includeNumbers = document.getElementById('includeNumbers').checked;
            const includeSymbols = document.getElementById('includeSymbols').checked;
            
            if (!includeUppercase && !includeLowercase && !includeNumbers && !includeSymbols) {
                showNotification('‚ö†Ô∏è SelecteazƒÉ cel pu»õin o op»õiune!', 'error');
                return;
            }
            
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            let charset = '';
            let password = '';
            
            if (includeUppercase) charset += uppercase;
            if (includeLowercase) charset += lowercase;
            if (includeNumbers) charset += numbers;
            if (includeSymbols) charset += symbols;
            
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * charset.length);
                password += charset[randomIndex];
            }
            
            if (includeUppercase && !/[A-Z]/.test(password)) {
                password = password.substring(0, password.length - 1) + uppercase[Math.floor(Math.random() * uppercase.length)];
            }
            if (includeLowercase && !/[a-z]/.test(password)) {
                password = password.substring(0, password.length - 1) + lowercase[Math.floor(Math.random() * lowercase.length)];
            }
            if (includeNumbers && !/[0-9]/.test(password)) {
                password = password.substring(0, password.length - 1) + numbers[Math.floor(Math.random() * numbers.length)];
            }
            if (includeSymbols && !/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(password)) {
                password = password.substring(0, password.length - 1) + symbols[Math.floor(Math.random() * symbols.length)];
            }
            
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            
            currentPassword = password;
            document.getElementById('generatedPassword').textContent = password;
            updatePasswordStrength(password);
            addToPasswordHistory(password);
            showNotification('üé≤ ParolƒÉ generatƒÉ cu succes!', 'success');
        }
        
        function updatePasswordStrength(password) {
            let strength = 0;
            const lengthScore = Math.min(password.length / 16, 1) * 25;
            strength += lengthScore;
            
            if (/[a-z]/.test(password)) strength += 15;
            if (/[A-Z]/.test(password)) strength += 15;
            if (/[0-9]/.test(password)) strength += 15;
            if (/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(password)) strength += 20;
            
            const uniqueChars = new Set(password).size;
            if (uniqueChars > password.length * 0.7) strength += 10;
            
            strength = Math.min(strength, 100);
            
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            
            strengthBar.style.width = strength + '%';
            
            if (strength < 40) {
                strengthBar.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
                strengthText.textContent = 'üî¥ SlabƒÉ';
                strengthText.style.color = '#ef4444';
            } else if (strength < 70) {
                strengthBar.style.background = 'linear-gradient(135deg, #fbbf24, #f59e0b)';
                strengthText.textContent = 'üü° Medie';
                strengthText.style.color = '#fbbf24';
            } else if (strength < 90) {
                strengthBar.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                strengthText.textContent = 'üü¢ BunƒÉ';
                strengthText.style.color = '#10b981';
            } else {
                strengthBar.style.background = 'linear-gradient(135deg, #06b6d4, #0891b2)';
                strengthText.textContent = 'üíé ExcelentƒÉ';
                strengthText.style.color = '#06b6d4';
            }
        }
        
        function copyPassword() {
            const password = document.getElementById('generatedPassword').textContent;
            
            if (!password || password === 'Click Generate pentru parolƒÉ') {
                showNotification('‚ö†Ô∏è GenereazƒÉ o parolƒÉ mai √Ænt√¢i!', 'error');
                return;
            }
            
            navigator.clipboard.writeText(password).then(() => {
                playSound('permanentSound', 0.4);
                showNotification('üìã ParolƒÉ copiatƒÉ √Æn clipboard!', 'success');
            }).catch(err => {
                console.error('Copy failed:', err);
                showNotification('‚ùå Eroare la copiere!', 'error');
            });
        }
        
        function addToPasswordHistory(password) {
            try {
                let history = JSON.parse(localStorage.getItem(PASSWORD_HISTORY_KEY) || '[]');
                history.unshift({ password: password, timestamp: Date.now() });
                history = history.slice(0, 5);
                localStorage.setItem(PASSWORD_HISTORY_KEY, JSON.stringify(history));
                renderPasswordHistory(history);
            } catch (e) {
                console.error('Error saving password history:', e);
            }
        }
        
        function loadPasswordHistory() {
            try {
                const history = JSON.parse(localStorage.getItem(PASSWORD_HISTORY_KEY) || '[]');
                renderPasswordHistory(history);
            } catch (e) {
                console.error('Error loading password history:', e);
                renderPasswordHistory([]);
            }
        }
        
        function renderPasswordHistory(history) {
            const container = document.getElementById('passwordHistory');
            
            if (!history || history.length === 0) {
                container.innerHTML = '<div style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 10px;">Nicio parolƒÉ generatƒÉ √ÆncƒÉ</div>';
                return;
            }
            
            container.innerHTML = history.map((item, index) => {
                const date = new Date(item.timestamp);
                const timeStr = date.toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' });
                
                return `
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 8px 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                        <span style="color: white; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${item.password}</span>
                        <span style="color: rgba(255, 255, 255, 0.6); font-size: 0.8em; white-space: nowrap;">${timeStr}</span>
                        <button onclick="copyPasswordFromHistory('${item.password.replace(/'/g, "\\'")}'); event.stopPropagation();" style="background: rgba(16, 185, 129, 0.6); border: none; color: white; padding: 4px 10px; border-radius: 6px; cursor: pointer; font-size: 0.85em; white-space: nowrap;" onmouseover="this.style.background='rgba(16, 185, 129, 0.8)'" onmouseout="this.style.background='rgba(16, 185, 129, 0.6)'">
                            üìã
                        </button>
                    </div>
                `;
            }).join('');
        }
        
        function copyPasswordFromHistory(password) {
            navigator.clipboard.writeText(password).then(() => {
                playSound('clickSound', 0.3);
                showNotification('üìã ParolƒÉ copiatƒÉ!', 'success');
            }).catch(err => {
                console.error('Copy failed:', err);
                showNotification('‚ùå Eroare la copiere!', 'error');
            });
        }
        
        function clearPasswordHistory() {
            if (confirm('Sigur vrei sƒÉ »ôtergi istoricul de parole?')) {
                localStorage.removeItem(PASSWORD_HISTORY_KEY);
                renderPasswordHistory([]);
                playSound('thudSound', 0.3);
                showNotification('üóëÔ∏è Istoric »ôters!', 'info');
            }
        }

        // ===== NOTES/TODO SYSTEM =====
        const NOTES_KEY = 'notes_v1';
        let currentNotesFilter = 'all';
        
        function openNotesModal() {
            playSound('bleepSound', 0.3);
            document.getElementById('notesModal').classList.add('show');
            loadNotes();
            document.getElementById('noteInput').focus();
        }
        
        function closeNotesModal() {
            playSound('thudSound', 0.2);
            document.getElementById('notesModal').classList.remove('show');
        }
        
        function getNotes() {
            try {
                return JSON.parse(localStorage.getItem(NOTES_KEY) || '[]');
            } catch (e) {
                return [];
            }
        }
        
        function saveNotes(notes) {
            try {
                localStorage.setItem(NOTES_KEY, JSON.stringify(notes));
            } catch (e) {
                console.error('Error saving notes:', e);
            }
        }
        
        function addNote() {
            const input = document.getElementById('noteInput');
            const text = input.value.trim();
            
            if (!text) {
                showNotification('‚ö†Ô∏è Scrie ceva mai √Ænt√¢i!', 'error');
                return;
            }
            
            const type = document.querySelector('input[name="noteType"]:checked').value;
            
            const note = {
                id: Date.now(),
                text: text,
                type: type,
                completed: false,
                timestamp: Date.now()
            };
            
            const notes = getNotes();
            notes.unshift(note);
            saveNotes(notes);
            
            input.value = '';
            playSound('permanentSound', 0.4);
            showNotification('‚úÖ NotƒÉ adƒÉugatƒÉ!', 'success');
            
            loadNotes();
        }
        
        function toggleNote(id) {
            const notes = getNotes();
            const note = notes.find(n => n.id === id);
            
            if (note) {
                note.completed = !note.completed;
                saveNotes(notes);
                playSound('clickSound', 0.3);
                loadNotes();
            }
        }
        
        function deleteNote(id) {
            if (confirm('Sigur vrei sƒÉ »ôtergi aceastƒÉ notƒÉ?')) {
                let notes = getNotes();
                notes = notes.filter(n => n.id !== id);
                saveNotes(notes);
                playSound('thudSound', 0.3);
                showNotification('üóëÔ∏è NotƒÉ »ôtearsƒÉ!', 'info');
                loadNotes();
            }
        }
        
        function editNote(id) {
            const notes = getNotes();
            const note = notes.find(n => n.id === id);
            
            if (note) {
                const newText = prompt('EditeazƒÉ nota:', note.text);
                if (newText && newText.trim()) {
                    note.text = newText.trim();
                    saveNotes(notes);
                    playSound('toggleSound', 0.3);
                    showNotification('‚úèÔ∏è NotƒÉ actualizatƒÉ!', 'success');
                    loadNotes();
                }
            }
        }
        
        function filterNotes(type) {
            currentNotesFilter = type;
            
            ['filterAll', 'filterTodo', 'filterNote', 'filterImportant'].forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    if (id === 'filter' + type.charAt(0).toUpperCase() + type.slice(1) || (type === 'all' && id === 'filterAll')) {
                        btn.style.background = 'rgba(255, 255, 255, 0.3)';
                        btn.style.borderColor = 'rgba(255, 255, 255, 0.5)';
                    } else {
                        btn.style.background = 'rgba(255, 255, 255, 0.15)';
                        btn.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                    }
                }
            });
            
            playSound('clickSound', 0.2);
            loadNotes();
        }
        
        function clearCompletedNotes() {
            const notes = getNotes();
            const completedCount = notes.filter(n => n.completed).length;
            
            if (completedCount === 0) {
                showNotification('üìù Nu sunt note completate!', 'info');
                return;
            }
            
            if (confirm(`»òtergi ${completedCount} note completate?`)) {
                const filtered = notes.filter(n => !n.completed);
                saveNotes(filtered);
                playSound('thudSound', 0.3);
                showNotification(`üóëÔ∏è ${completedCount} note »ôterse!`, 'success');
                loadNotes();
            }
        }
        
        function loadNotes() {
            const notes = getNotes();
            const container = document.getElementById('notesList');
            
            const total = notes.length;
            const completed = notes.filter(n => n.completed && n.type === 'todo').length;
            const pending = notes.filter(n => !n.completed && n.type === 'todo').length;
            
            document.getElementById('totalNotes').textContent = total;
            document.getElementById('completedTodos').textContent = completed;
            document.getElementById('pendingTodos').textContent = pending;
            
            document.getElementById('countAll').textContent = total;
            document.getElementById('countTodo').textContent = notes.filter(n => n.type === 'todo').length;
            document.getElementById('countNote').textContent = notes.filter(n => n.type === 'note').length;
            document.getElementById('countImportant').textContent = notes.filter(n => n.type === 'important').length;
            
            let filtered = notes;
            if (currentNotesFilter !== 'all') {
                filtered = notes.filter(n => n.type === currentNotesFilter);
            }
            
            if (filtered.length === 0) {
                container.innerHTML = '<div style="color: rgba(255, 255, 255, 0.6); text-align: center; padding: 40px 20px;">üìù Nicio notƒÉ √Æn aceastƒÉ categorie</div>';
                return;
            }
            
            container.innerHTML = filtered.map(note => {
                const icon = note.type === 'todo' ? '‚úÖ' : note.type === 'important' ? '‚≠ê' : 'üìù';
                const date = new Date(note.timestamp);
                const dateStr = date.toLocaleDateString('ro-RO', { day: '2-digit', month: 'short', hour: '2-digit', minute: '2-digit' });
                
                return `
                    <div class="note-item ${note.completed ? 'completed' : ''}" data-id="${note.id}">
                        ${note.type === 'todo' ? `<input type="checkbox" class="note-checkbox" ${note.completed ? 'checked' : ''} onchange="toggleNote(${note.id})">` : ''}
                        <span style="font-size: 1.2em;">${icon}</span>
                        <div class="note-text">
                            <div>${note.text}</div>
                            <div style="font-size: 0.75em; color: rgba(255, 255, 255, 0.6); margin-top: 4px;">${dateStr}</div>
                        </div>
                        <div class="note-actions">
                            <button class="note-btn" onclick="editNote(${note.id})" title="EditeazƒÉ">‚úèÔ∏è</button>
                            <button class="note-btn delete" onclick="deleteNote(${note.id})" title="»òterge">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');
        }
    </script>
</body>
</html>
